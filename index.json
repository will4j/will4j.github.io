[{"categories":["blog-build"],"content":"ç½‘ä¸Šå†²æµªçœ‹åˆ°ä¸€ä¸ªåŒæ ·ä½¿ç”¨ FixIt ä¸»é¢˜çš„åšå®¢[1]ï¼Œé¦–é¡µçš„è´ªé£Ÿè›‡åŠ¨ç”»ä¸€ä¸‹æŠ“ä½äº†æˆ‘çš„çœ¼çƒï¼Œçœ‹åˆ°å¥½ä¸œè¥¿å½“ç„¶è¦æ¬è¿‡æ¥ï¼Œä¸€ç•ª Google åç»ˆäºæˆåŠŸï¼Œæ¥çœ‹ä¸‹æœ€ç»ˆæ•ˆæœï¼š æ•´ä½“æ€è·¯åˆ†ä¸ºä¸¤æ­¥ï¼š å…ˆé€šè¿‡ GitHub Action Platane/snk [2] ç”Ÿæˆ svg åŠ¨ç”»å¹¶ä¸Šä¼ åˆ° GitHub ä»“åº“ï¼› è‡ªå®šä¹‰åšå®¢é¦–é¡µå¤´åƒ cssï¼Œå°†è´ªé£Ÿè›‡åŠ¨ç”» svg ä½œä¸ºé¦–é¡µå¤´åƒçš„èƒŒæ™¯å›¾ç‰‡ï¼› ","date":"2023-11-29","objectID":"/posts/github-contribution-grid-snake/:0:0","tags":["GitHub"],"title":"GitHub æäº¤è®°å½•è´ªé£Ÿè›‡åŠ¨ç”»","uri":"/posts/github-contribution-grid-snake/"},{"categories":["blog-build"],"content":"è´ªé£Ÿè›‡åŠ¨ç”»ç”Ÿæˆ æ‰¾ä¸€ä¸ªå…¬å¼€ä»“åº“æ·»åŠ  GitHub Action å·¥ä½œæµï¼Œç¬¬ä¸€æ¬¡æäº¤åå¯æ‰‹åŠ¨æ‰§è¡Œï¼Œå®šæ—¶ä»»åŠ¡ç­‰æ•ˆä¸œå…«åŒºæ—¶é—´æ¯å¤©æ—©ä¸Š 5:30 å’Œä¸‹åˆ 17:30 æ‰§è¡Œï¼Œä»¥ä¿è¯è´ªé£Ÿè›‡åŠ¨ç”»ä¸­çš„æäº¤è®°å½•æ›´æ–°ã€‚ name: Generate Snake Animation on: workflow_dispatch: schedule: # equal UTC/GMT+8 \"30 5,17 * * *\" - cron: \"30 9,21 * * *\" jobs: generate: permissions: contents: write runs-on: ubuntu-latest timeout-minutes: 10 steps: # https://github.com/Platane/snk - name: generate github-contribution-grid-snake.svg uses: Platane/snk/svg-only@v3 with: github_user_name: ${{ github.repository_owner }} outputs: | dist/github-contribution-grid-snake.svg dist/github-contribution-grid-snake-dark.svg?palette=github-dark # push the content of \u003cbuild_dir\u003e to a branch # the content will be available at https://raw.githubusercontent.com/\u003cgithub_user\u003e/\u003crepository\u003e/\u003ctarget_branch\u003e/\u003cfile\u003e - name: push github-contribution-grid-snake.svg to the output branch uses: crazy-max/ghaction-github-pages@v4 with: target_branch: output build_dir: dist env: GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} ä»»åŠ¡æ‰§è¡Œåï¼Œåœ¨ä»“åº“çš„ output åˆ†æ”¯å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„ svg æ–‡ä»¶ï¼š ","date":"2023-11-29","objectID":"/posts/github-contribution-grid-snake/:1:0","tags":["GitHub"],"title":"GitHub æäº¤è®°å½•è´ªé£Ÿè›‡åŠ¨ç”»","uri":"/posts/github-contribution-grid-snake/"},{"categories":["blog-build"],"content":"è‡ªå®šä¹‰é¦–é¡µå¤´åƒ css å‚è€ƒ FixIt æ–‡æ¡£[3]ï¼Œå¯æ·»åŠ  assets/css/_custom.scss æ–‡ä»¶è¿›è¡Œæ ·å¼è‡ªå®šä¹‰ã€‚ é€šè¿‡æµè§ˆå™¨æ§åˆ¶å°å®šä½é¦–é¡µå¤´åƒå…ƒç´ ï¼š ç„¶åæ·»åŠ å¯¹åº” css æ ·å¼ï¼š // assets/css/_custom.scss .home .home-profile .home-avatar { background-size: 100% 100%; padding: 1rem; background-repeat: no-repeat; background-position: center top; background-image: url(https://raw.githubusercontent.com/will4j/blog-resource/output/github-contribution-grid-snake.svg); [data-theme='dark'] \u0026 { background-image: url(https://raw.githubusercontent.com/will4j/blog-resource/output/github-contribution-grid-snake-dark.svg); } } å®Œæˆæ”¶å·¥ã€‚ ","date":"2023-11-29","objectID":"/posts/github-contribution-grid-snake/:2:0","tags":["GitHub"],"title":"GitHub æäº¤è®°å½•è´ªé£Ÿè›‡åŠ¨ç”»","uri":"/posts/github-contribution-grid-snake/"},{"categories":["blog-build"],"content":"å‚è€ƒèµ„æ–™ [1]. ä¸ªäººåšå®¢ï¼šæ™´ç©ºå°ç­‘ [2]. GitHub ä»“åº“ï¼šPlatane/snk [3]. FixIt å®˜æ–¹æ–‡æ¡£ï¼šè‡ªå®šä¹‰æ ·å¼ ","date":"2023-11-29","objectID":"/posts/github-contribution-grid-snake/:3:0","tags":["GitHub"],"title":"GitHub æäº¤è®°å½•è´ªé£Ÿè›‡åŠ¨ç”»","uri":"/posts/github-contribution-grid-snake/"},{"categories":["rust-kata"],"content":" Note: Rust å¡å¡”ç³»åˆ—æ—¨åœ¨é€šè¿‡å…·ä½“åœºæ™¯çš„ç¼–ç¨‹ç»ƒä¹ å­¦ä¹  Rust ç¼–ç¨‹è¯­è¨€ï¼Œç»“å°¾æ˜¯ç›¸å…³çš„ Rust çŸ¥è¯†ç‚¹æ¦‚è¦æ€»ç»“ï¼Œé™„ä¸Šå‚è€ƒèµ„æ–™ä»¥ä½œæ‰©å±•é˜…è¯»ã€‚ ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:0:0","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"é—®é¢˜æè¿° å®ç°ä¸€ä¸ªçŒœæ•°å­—æ¸¸æˆï¼šæ¸¸æˆå¼€å§‹å‰ï¼Œä»ç©å®¶è¾“å…¥çš„æ•°å­—èŒƒå›´ï¼ˆå¦‚1åˆ°100ï¼‰ä¸­éšæœºé€‰å–ä¸€ä¸ªæ•°å­—ä½œä¸ºç­”æ¡ˆï¼›æ¯è½®æ¸¸æˆæ ¹æ®ç©å®¶çš„è¾“å…¥ç¼©å°æ•°å­—èŒƒå›´ï¼Œç›´åˆ°ç©å®¶çŒœä¸­ç­”æ¡ˆæ—¶æ¸¸æˆç»“æŸï¼Œç»Ÿè®¡ç©å®¶çŒœçš„æ€»æ¬¡æ•°ã€‚ Note: Rust å®˜ç½‘ç”µå­ä¹¦ã€ŠRust ç¼–ç¨‹è¯­è¨€ã€‹ç¬¬äºŒç« [1]ä¹Ÿä»¥çŒœæ•°å­—æ¸¸æˆä½œä¸ºç¤ºä¾‹ï¼Œè¿™ä¸ªå¡å¡”è¾ƒä¹‹ä¼šç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½†ç”¨æ„éƒ½åœ¨äºé€šè¿‡å…·ä½“åœºæ™¯æ¼”ç¤º Rust åŸºæœ¬è¯­æ³•ã€‚ ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:1:0","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"æµ‹è¯•å…ˆè¡Œ ä¼˜é›…çš„ä»£ç è‚¯å®šä¹Ÿæ˜¯æ˜“äºæµ‹è¯•çš„ï¼Œåä¹‹ï¼Œå¼€å§‹ç¼–ç ä¹‹å‰å…ˆæ€è€ƒæµ‹è¯•åœºæ™¯æ˜¯ä»åŠŸèƒ½å±‚é¢å¯¹é—®é¢˜è¿›è¡Œåˆ†è§£ï¼Œæœ‰åŠ©äºå†™å‡ºèŒè´£æ¸…æ™°ï¼Œæ¾è€¦åˆçš„ä»£ç ã€‚Rust æµ‹è¯•ç¼–å†™å¯å‚è€ƒæ–‡æ¡£[2]ã€‚ æŠ½å–çŒœæ•°å­—æ¸¸æˆçš„ä¸¤ä¸ªä¸»è¦åŠŸèƒ½ï¼šæ¸¸æˆåˆ›å»ºï¼ˆnew_gameï¼‰ä»¥åŠæ•°å­—çŒœæµ‹ï¼ˆdo_guessï¼‰ï¼Œå•å…ƒæµ‹è¯•åˆ†ä¸ºåŸºæœ¬åŠŸèƒ½ç”¨ä¾‹å’Œå¼‚å¸¸åœºæ™¯ç”¨ä¾‹ä¸¤ç»„ï¼Œå¯ä»¥å…ˆå®ç°åŸºæœ¬åŠŸèƒ½ç”¨ä¾‹å†å®ç°å¼‚å¸¸åœºæ™¯ç”¨ä¾‹ï¼š #[cfg(test)] mod tests { use crate::{do_guess, new_game}; // start of basic use cases #[test] fn new_game_ok() { let (min, max, secret_number) = new_game(\"1 100\"); assert_eq!(min, 1); assert_eq!(max, 100); assert!(secret_number \u003e= 1 \u0026\u0026 secret_number \u003c= 100); } #[test] fn do_guess_bingo() { let guess_result = do_guess(1, 100, 50, \"50\"); assert_eq!(guess_result, Ok((0, 50, 50))); } // end of basic use cases // start of exception use cases #[test] fn do_guess_wrong() { let guess_result = do_guess(1, 100, 37, \"50\"); assert_eq!(guess_result, Ok((1, 1, 49))); let guess_result = do_guess(1, 49, 37, \"25\"); assert_eq!(guess_result, Ok((-1, 26, 49))); } #[test] fn do_guess_failed() { let guess_result = do_guess(1, 100, 37, \"abc\"); assert_eq!(guess_result.unwrap_err(), \"Please input a integer number\"); let guess_result = do_guess(25, 50, 37, \"51\"); assert_eq!(guess_result.unwrap_err(), \"Number should between 25 and 50\"); } // end of exception use cases } /// åˆ›å»ºæ–°çš„çŒœæ•°å­—æ¸¸æˆï¼Œè¿”å›æ¸¸æˆèŒƒå›´ä»¥åŠèŒƒå›´å†…çš„éšæœºæ•°å­—ã€‚ /// /// # Arguments /// /// * `game_str` - æ¸¸æˆåˆ›å»ºå­—ç¬¦ä¸²ï¼Œç©ºæ ¼åˆ†å‰²çš„æ•°å­—èµ·å§‹å’Œç»“æŸèŒƒå›´ã€‚ /// /// # Examples /// ``` /// let (min, max, secret) = new_game(\"1 100\") /// ``` fn new_game(game_str: \u0026str) -\u003e (u32, u32, u32) { (1, 100, 50) } /// è¿›è¡Œä¸€è½®çŒœæ•°å­—æ¸¸æˆï¼Œè¿”å›çŒœæµ‹ç»“æœä»¥åŠæ ¹æ®ç»“æœè°ƒæ•´è¿‡åçš„æ•°å­—èŒƒå›´ã€‚ /// /// åŠŸèƒ½åŒ…å«å¯¹è¾“å…¥è¿›è¡Œæ ¡éªŒã€‚ /// /// # Arguments /// /// * `min` - æ•°å­—èŒƒå›´ï¼šæœ€å°æ•°å­— /// * `max` - æ•°å­—èŒƒå›´ï¼šæœ€å¤§æ•°å­— /// * `secret_number` - çŒœæ•°å­—æ¸¸æˆç­”æ¡ˆ /// * `guess_str` - æœ¬è½®æ¸¸æˆè¾“å…¥ fn do_guess(min: u32, max: u32, secret_number: u32, guess_str: \u0026str) -\u003e Result\u003c(i8, u32, u32), String\u003e { Ok((-1, 25, 49)) } ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:2:0","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"ä»£ç å®ç° use std::cmp::Ordering; use std::io::{self, Write}; use rand::Rng; fn main() -\u003e io::Result\u003c()\u003e { println!(\"Let's Play a Number Guessing Game!\"); print!(\"New Game: \"); io::stdout().flush().unwrap(); let mut input_str = String::new(); io::stdin().read_line(\u0026mut input_str).unwrap(); // æ ¹æ®ç”¨æˆ·è¾“å…¥åˆ›å»ºæ–°æ¸¸æˆï¼Œè¿”å›æœ€å°å€¼ã€æœ€å¤§å€¼å’Œéšæœºæ•°å­—ç­”æ¡ˆ let (mut min, mut max, secret_number) = new_game(\u0026input_str); // è®°å½•çŒœçš„æ¬¡æ•° let mut count: u32 = 0; loop { print!(\"Guess a Number between {min} and {max}: \"); io::stdout().flush().unwrap(); let mut input_str = String::new(); io::stdin().read_line(\u0026mut input_str).unwrap(); let guess_result = do_guess(min, max, secret_number, \u0026input_str); match guess_result { Ok((result, new_min, new_max)) =\u003e { print!(\"You guess {}, \", input_str.trim()); count += 1; min = new_min; max = new_max; if result == 0 { println!(\"You win with {count} guesses!\"); break; } else if result == -1 { println!(\"Too small!\"); } else { println!(\"Too big!\"); } } Err(err) =\u003e { println!(\"{err}\"); continue; } }; } Ok(()) } fn new_game(game_str: \u0026str) -\u003e (u32, u32, u32) { let range: Vec\u003cu32\u003e = game_str .split_whitespace() .map(|s| s.parse().expect(\"parse error\")) .collect(); let min = range[0]; let max = range[1]; let secret_number = rand::thread_rng().gen_range(min..=max); (min, max, secret_number) } fn do_guess(min: u32, max: u32, secret_number: u32, guess_str: \u0026str) -\u003e Result\u003c(i8, u32, u32), String\u003e { match guess_str.trim().parse::\u003cu32\u003e() { Ok(_num) =\u003e { if _num \u003c min || _num \u003e max { return Err(format!(\"Number should between {min} and {max}\")); } // æ¯”å¯¹ç»“æœï¼Œè°ƒæ•´æ•°å­—èŒƒå›´ match _num.cmp(\u0026secret_number) { Ordering::Less =\u003e Ok((-1, _num + 1, max)), Ordering::Greater =\u003e Ok((1, min, _num - 1)), Ordering::Equal =\u003e Ok((0, _num, _num)), } } Err(_) =\u003e return Err(format!(\"Please input a integer number\")) } } ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:3:0","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"ä»£ç æ‰§è¡Œ $ cargo run --bin number-guessing-game Finished dev [unoptimized + debuginfo] target(s) in 0.04s Running `target/debug/number-guessing-game` Let's Play a Number Guessing Game! New Game: 1 20 Guess a Number between 1 and 20: 10 You guess 10, Too big! Guess a Number between 1 and 9: 5 You guess 5, Too small! Guess a Number between 6 and 9: 8 You guess 8, You win with 3 guesses! ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:4:0","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"Rust çŸ¥è¯†ç‚¹ ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:5:0","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"Cargo Cargo [3]æ˜¯ Rust é¡¹ç›®çš„ç¼–è¯‘æ„å»ºå’Œä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¯¹åº”é…ç½®æ–‡ä»¶ Cargo.toml [4]ï¼Œå¯é€šè¿‡ Cargo å‘½ä»¤åˆ›å»ºé¡¹ç›®ï¼š $ cargo new rust-kata Created binary (application) `rust-kata` package $ tree rust-kata rust-kata â”œâ”€â”€ Cargo.toml â””â”€â”€ src â””â”€â”€ main.rs $ cat rust-kata/Cargo.toml [package] name = \"rust-kata\" version = \"0.1.0\" edition = \"2021\" # See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html [dependencies] é»˜è®¤æƒ…å†µä¸‹ï¼ŒRust é¡¹ç›®åªèƒ½æœ‰ä¸€ä¸ª main å‡½æ•°ä½œä¸ºæ‰§è¡Œå…¥å£ï¼ˆå¦‚ src/main.rsï¼‰ï¼Œé€šè¿‡ Cargo bin å¯é¢å¤–è®¾ç½®ã€‚é¡¹ç›®ä¾èµ–å£°æ˜åœ¨ dependencies é…ç½®ä¸‹ï¼Œå¯é€šè¿‡ crates.io [5]æœç´¢ä¸‰æ–¹ä¾èµ–ã€‚ rust-kata é…ç½®çŒœæ•°å­—æ¸¸æˆå…¥å£ï¼Œæ·»åŠ éšæœºæ•°åº“ä¾èµ–åé…ç½®å¦‚ä¸‹ï¼š $ cat rust-kata/Cargo.toml [package] name = \"rust-kata\" version = \"0.1.0\" edition = \"2021\" # See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html [dependencies] rand = \"0.8.5\" [[bin]] name = \"number-guessing-game\" path = \"src/bin/number_guesssing_game.rs\" ç¨‹åºæ‰§è¡Œæ–¹å¼ï¼š # æ‰§è¡Œé¡¹ç›®ä¸»ç¨‹åº src/main.rs $ cargo run --bin rust-kata # æ‰§è¡ŒçŒœæ•°å­—æ¸¸æˆç¨‹åº $ cargo run --bin number-guessing-game ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:5:1","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"æ§åˆ¶å°è¾“å‡º Rust æ ‡å‡†åº“[6]ä¸­åŒ…å«æ§åˆ¶å°è¾“å‡ºå‡½æ•° print å’Œ printlnï¼Œä¸¤è€…å‡æ”¯æŒ Rust å­—ç¬¦ä¸²æ ¼å¼åŒ–è¯­æ³•[7]ã€‚ åŸºäºæ€§èƒ½è€ƒè™‘ï¼Œprint è¾“å‡ºä¼šå…ˆæ”¾åˆ°è¡Œç¼“å†²åŒºï¼Œä¸ä¼šç«‹å³æ‰“å°åˆ°æ§åˆ¶å°ï¼Œå¯é€šè¿‡ io::stdout().flush() æ‰‹åŠ¨è§¦å‘æ‰“å°ï¼š // ç«‹å³è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œç»“æŸåå¦èµ·ä¸€è¡Œ println!(\"Let's Play a Number Guessing Game!\"); // ä¸æ¢è¡Œï¼Œä¸ä¼šç«‹å³è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œéœ€è¦æ‰‹åŠ¨ flushï¼Œæˆ–ç­‰å¾…ä¸‹ä¸€æ¬¡ printlnï¼Œæˆ–è€…ç­‰å¾…ç¨‹åºè¿è¡Œç»“æŸ print!(\"Guess a Number between {min} and {max}: \"); io::stdout().flush().unwrap(); ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:5:2","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"å˜é‡å¯å˜æ€§ Rust é€šè¿‡ let å…³é”®å­—å£°æ˜å˜é‡ï¼Œé»˜è®¤ä¸å¯ä¿®æ”¹ï¼Œæ”¯æŒå˜é‡ä¿®æ”¹éœ€è¦é€šè¿‡ mut å…³é”®å­—å£°æ˜ã€‚ // x å˜é‡ä¸æ”¯æŒä¿®æ”¹ let x = 5; x = 6; ^^^^^ cannot assign twice to immutable variable // mut x å˜é‡æ”¯æŒä¿®æ”¹ let mut x = 5; x = 6; ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:5:3","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"å‡½æ•°å£°æ˜ä¸è°ƒç”¨ Rust é€šè¿‡ fn å…³é”®å­—å£°æ˜å‡½æ•°[8]ï¼Œæ”¯æŒå¤šè¿”å›å€¼ï¼Œå¯çœç•¥ return è¯­å¥ï¼Œä»¥æœ€åä¸€è¡Œçš„å˜é‡æˆ–è€…è¡¨è¾¾å¼ä½œä¸ºå‡½æ•°è¿”å›å€¼ï¼š fn upper_and_lower(str: \u0026str) -\u003e (String, String) { let upper = src.to_uppercase(); let lower = src.to_lowercase(); (upper, lower) } fn main() { let (upper, lower) = upper_and_lower(\"Rust\"); println!(\"{upper} {lower}\"); // RUST rust } ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:5:4","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"å˜é‡æ‰€æœ‰æƒåŠå…¶ç§Ÿå€Ÿ Rust ä¸ä½¿ç”¨åƒåœ¾æ”¶é›†å™¨ï¼Œè€Œæ˜¯å¼•å…¥æ‰€æœ‰æƒæœºåˆ¶[9]æ¥è¿›è¡Œå†…å­˜ç®¡ç†ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¿è¯å§‹ç»ˆåªæœ‰ä¸€ä¸ªå˜é‡å¯¹å†…å­˜åŒºåŸŸå…·æœ‰æ‰€æœ‰æƒï¼Œæ‰€æœ‰æƒå˜é‡å¤±æ•ˆæ—¶å¯¹åº”å†…å­˜å³è¢«é‡Šæ”¾ã€‚ æ‰€æœ‰æƒ æ‰€æœ‰æƒæœºåˆ¶ä¸»è¦ç”¨äºå †å†…å­˜ç®¡ç†ã€‚ å¯¹äºåŸºç¡€ç±»å‹å˜é‡ï¼ˆå¦‚ u32ï¼‰ï¼Œå…¶é•¿åº¦å›ºå®šï¼Œé»˜è®¤åœ¨æ ˆä¸Šåˆ†é…ï¼Œå˜é‡è·Ÿéšå‡ºæ ˆæ“ä½œé‡Šæ”¾ã€‚æ ˆä¸Šå˜é‡é—´ä¼ é€’ä»¥å¤åˆ¶ï¼ˆCopyï¼‰æ–¹å¼è¿›è¡Œï¼š let x: u32 = 64; let y = x; println!(\"x={x} y={y}\"); // è¾“å‡º x=64 y=64 ä»¥ä¸Šä»£ç ä¸­ï¼Œlet y = x; è¯­å¥å®é™…ä¸Šå¤åˆ¶ x åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å˜é‡ yï¼Œx å’Œ y éƒ½å­˜å‚¨åœ¨æ ˆä¸Šã€‚ å¯¹äºå¤æ‚ç±»å‹å˜é‡ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°ç»„ï¼‰ï¼Œå…¶é•¿åº¦ä¸å›ºå®šï¼Œéœ€è¦åœ¨å †ä¸Šè¿›è¡Œåˆ†é…ã€‚è¦ä¿è¯åŒæ—¶åªæœ‰ä¸€ä¸ªå˜é‡å¯¹å †å†…å­˜åŒºåŸŸæ‹¥æœ‰æ‰€æœ‰æƒï¼Œä¸å¯é¿å…ä¼šå‘ç”Ÿæ‰€æœ‰æƒå˜æ›´ï¼Œrust å¯¹æ‰€æœ‰æƒå˜æ›´çš„å¤„ç†ç­–ç•¥åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„å¼€å‘è€…çœ‹æ¥å¯èƒ½ä¼šæ¯”è¾ƒè¿åç›´è§‰ï¼š let x = String::from(\"Rusty\"); let y = x; - value moved here println!(\"x={x} y={y}\"); ^^ value borrowed here after move ä»¥ä¸Šä»£ç ä¸­ï¼Œlet y = x; è¯­å¥æ‰§è¡Œåï¼Œå˜é‡ x çš„æ‰€æœ‰æƒç§»äº¤ï¼ˆMoveï¼‰ç»™äº†å˜é‡ yï¼ŒåŒºåˆ«äºå¤åˆ¶ï¼ˆCopyï¼‰çš„æ–¹å¼ï¼Œæ‰€æœ‰æƒç§»äº¤åå˜é‡å³è§†ä¸ºå¤±æ•ˆï¼Œé™¤éé‡æ–°å£°æ˜ä½¿ç”¨ï¼Œåç»­æ‰€æœ‰å¯¹äºå˜é‡ x çš„è®¿é—®åœ¨ç¼–è¯‘æ—¶å°±ä¼šæŠ¥é”™ã€‚ é€šè¿‡è§‚å¯Ÿå˜é‡æŒ‡é’ˆçš„å†…å­˜åœ°å€å¯ä»¥æ›´å¥½çš„ç†è§£æ‰€æœ‰æƒç§»äº¤ï¼š let mut x = String::from(\"Rusty\"); println!(\"x={:p} *x={:p}\", \u0026x, \u0026*x); // è¾“å‡º x=0x16f0aa940 *x=0x600001e4c040 let y = x; println!(\"y={:p} *y={:p}\", \u0026y, \u0026*y); // è¾“å‡º y=0x16f0aa9c0 *y=0x600001e4c040 x = String::from(\"Rusty\"); println!(\"x={:p} *x={:p}\", \u0026x, \u0026*x); // è¾“å‡º x=0x16f0aa940 *x=0x600001e4c050 ä»¥ä¸Šä»£ç ä¸­ï¼Œ\u0026x è¡¨ç¤ºå˜é‡åœ¨æ ˆä¸Šçš„åœ°å€ï¼Œ\u0026*x è¡¨ç¤ºå˜é‡æŒ‡å‘çš„å †å†…å­˜åœ°å€ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰æƒå˜æ›´åï¼Œå˜é‡ y æŒ‡å‘çš„å †å†…å­˜åœ°å€ \u0026*y ä¸ä¹‹å‰çš„ \u0026*x ç›¸åŒï¼Œè¯´æ˜å˜é‡ y ç¡®å®æ¥ç®¡äº†å˜é‡ x å¯¹å †å†…å­˜çš„æ‰€æœ‰æƒã€‚å¯¹å˜é‡ x é‡æ–°åˆ†é…åï¼Œå…¶æ ˆä¸Šå†…å­˜åœ°å€ä¸å˜ï¼Œå³æ ˆä¸Šå˜é‡ \u0026x è¢«å¤ç”¨ï¼Œä½†æ˜¯æŒ‡å‘çš„å †å†…å­˜åœ°å€å·²ç»å‘ç”Ÿäº†å˜æ›´ã€‚ æ‰€æœ‰æƒç§Ÿå€Ÿ å¦‚æœä½¿ç”¨æ‰€æœ‰æƒå˜æ›´æœºåˆ¶è¿›è¡Œå‡½æ•°ä¼ å‚ï¼Œå‡½æ•°è°ƒç”¨åå®å‚å˜é‡å³å¤±æ•ˆï¼Œå°†å¯¼è‡´åç»­å¯¹è¯¥å˜é‡çš„è®¿é—®æŠ¥é”™ï¼Œè¿™ç§æƒ…å†µå°±éœ€è¦ç”¨åˆ°æ‰€æœ‰æƒç§Ÿå€Ÿæœºåˆ¶ï¼Œç§Ÿå€Ÿéœ€è¦ä¾èµ–å˜é‡å¼•ç”¨ï¼ˆä½¿ç”¨ \u0026 æ“ä½œç¬¦ï¼‰ï¼š fn main() { let x = String::from(\"Rusty\"); let length = len(\u0026x); println!(\"{x} length={length}\"); // è¾“å‡º Rusty length=5 } fn len(str: \u0026String) -\u003e usize { str.len() } ä»¥ä¸Šä»£ç  len å‡½æ•°è°ƒç”¨ä¼ é€’çš„æ˜¯å˜é‡å¼•ç”¨ \u0026xï¼Œæ²¡æœ‰å‘ç”Ÿæ‰€æœ‰æƒå˜æ›´ï¼Œå› æ­¤åœ¨åç»­ println è¯­å¥ä¸­ä»ç„¶å¯ä»¥è®¿é—®å˜é‡ xã€‚å¼•ç”¨ä¹Ÿå¯ä»¥å¯¹å˜é‡è¿›è¡Œä¿®æ”¹ï¼Œä½†æ˜¯éœ€è¦é€šè¿‡ \u0026mut æ˜¾å¼å£°æ˜ã€‚ ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:5:5","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"ä»æ§åˆ¶å°è·å–ç”¨æˆ·è¾“å…¥ è·å–æ§åˆ¶å°è¾“å…¥[10]ä½¿ç”¨å¯å˜å¼•ç”¨ä¼ é€’çš„æ–¹å¼ï¼Œå°†ç”¨æˆ·è¾“å…¥ä¿å­˜åˆ°å­—ç¬¦ä¸²å˜é‡ï¼š let mut input_str = String::new(); io::stdin().read_line(\u0026mut input_str).expect(\"failed to read line\"); ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:5:6","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"å­—ç¬¦ä¸²åˆ‡åˆ†å’Œè½¬æ¢ Rust æä¾›å¤šç§å­—ç¬¦ä¸² split æ–¹å¼[11]ï¼Œsplit è¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œå¯æ ¹æ®éœ€è¦å†æ¬¡è¿›è¡Œæ˜ å°„æˆ–è¿‡æ»¤å¤„ç†ï¼ŒçŒœæ•°å­—æ¸¸æˆå®ç°ä½¿ç”¨çš„æ˜¯æŒ‰ç©ºç™½å­—ç¬¦åˆ‡åˆ†ï¼ˆsplit_whitespaceï¼‰: let x = String::from(\"a b c\"); let y = x.split_whitespace(); println!(\"{:?}\", y.collect::\u003cVec\u003c_\u003e\u003e()); // è¾“å‡º [\"a\", \"b\", \"c\"] ä½¿ç”¨ parse æ–¹æ³•[12]å¯å¯¹å­—ç¬¦ä¸²è¿›è¡Œç±»å‹è½¬æ¢ï¼š let four: u32 = \"4\".parse().unwrap(); assert_eq!(4, four); ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:5:7","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"Match æµç¨‹æ§åˆ¶ Rust é€šè¿‡ Match [13]è¾¾åˆ°ç±»ä¼¼ swtich çš„æ•ˆæœï¼Œä½†æ˜¯ Match åŠŸèƒ½æ›´åŠ å¼ºå¤§ã€‚å¯ä»¥å¤„ç†è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥å¤„ç†å‡½æ•°è¿”å›å€¼ï¼š let x = String::from(\"123\"); let result = match x.parse::\u003cu32\u003e() { Ok(num) =\u003e num, Err(_) =\u003e panic!(\"can't parse to integer\"), }; match è¦æ±‚åˆ†æ”¯å®Œå¤‡ï¼Œä¸Šé¢çš„ä»£ç å¦‚æœæ²¡æœ‰å¼‚å¸¸ Err(_) å¤„ç†åˆ†æ”¯ï¼Œç¼–è¯‘æ—¶ä¼šæŠ¥é”™ã€‚ ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:5:8","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"å¼‚å¸¸å¤„ç† Rust å°†å¼‚å¸¸åˆ†ä¸ºä¸å¯æ¢å¤å¼‚å¸¸ï¼ˆpanicï¼‰å’Œå¯æ¢å¤å¼‚å¸¸ï¼Œåè€…éœ€è¦ä¸»åŠ¨å¤„ç†æˆ–è€…å‘ä¸Šä¼ é€’ã€‚é€šå¸¸ä»¥ Result [14]ä½œä¸ºç»“æœåŒ…è£…å®¹å™¨ï¼š enum Result\u003cT, E\u003e { Ok(T), Err(E), } é™¤äº†ç”¨ match æ˜¾å¼å¤„ç†å¼‚å¸¸å¤–ï¼ŒResult æœ‰ä¸¤ç§ç”¨ panic å¤„ç†å¼‚å¸¸çš„å¿«æ·æ–¹å¼ï¼Œunwrap å’Œ expectï¼š let x = String::from(\"123\"); // unwrap åœ¨å¼‚å¸¸æ—¶ç›´æ¥ panicï¼Œä½¿ç”¨é»˜è®¤é”™è¯¯ä¿¡æ¯ let result = x.parse::\u003cu32\u003e().unwrap(); // expect ä¹Ÿåœ¨å¼‚å¸¸æ—¶ç›´æ¥ panicï¼Œä½†ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯ let result = x.parse::\u003cu32\u003e().expect(\"can't parse to integer\"); ä¸€èˆ¬åœ¨ç”Ÿäº§ç¯å¢ƒæ¨èä½¿ç”¨ expect ä»¥æä¾›æ›´å‡†ç¡®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:5:9","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["rust-kata"],"content":"å‚è€ƒèµ„æ–™ [1]. Programming a Guessing Game. ch02,ã€ŠRust ç¼–ç¨‹è¯­è¨€ã€‹ [2]. How to Write Tests. ch11.1,ã€ŠRust ç¼–ç¨‹è¯­è¨€ã€‹ [3]. Hello Cargo. ch01.3,ã€ŠRust ç¼–ç¨‹è¯­è¨€ã€‹ [4]. The Manifest Format.ã€ŠCargo æ‰‹å†Œã€‹ [5]. Rust ç¤¾åŒº crate ä»“åº“ [6]. Rust æ ‡å‡†åº“ï¼Œå®ç›®å½• [7]. Rust æ ‡å‡†æ¨¡å—ï¼šformat! [8]. Functions ch03.3,ã€ŠRust ç¼–ç¨‹è¯­è¨€ã€‹ [9]. What Is Ownership? ch04.1,ã€ŠRust ç¼–ç¨‹è¯­è¨€ã€‹ [10]. Rust æ ‡å‡†åº“ï¼šæ ‡å‡†è¾“å…¥è¾“å‡º [11]. Rust æ ‡å‡†æ¨¡å—ï¼šstr split_whitespace æ–¹æ³• [12]. Rust æ ‡å‡†æ¨¡å—ï¼šstr parse æ–¹æ³• [13]. Match æµç¨‹æ§åˆ¶. ch06.2,ã€ŠRust ç¼–ç¨‹è¯­è¨€ã€‹ [14]. å¯æ¢å¤å¼‚å¸¸ Result. ch09.2,ã€ŠRust ç¼–ç¨‹è¯­è¨€ã€‹ ","date":"2023-11-28","objectID":"/posts/rust-kata-number-guessing-game/:6:0","tags":["Rust"],"title":"Rust å¡å¡”ï¼šçŒœæ•°å­—æ¸¸æˆ","uri":"/posts/rust-kata-number-guessing-game/"},{"categories":["blog-build"],"content":"è®°å½•ä½¿ç”¨ hugo å’Œ FixIt ä¸»é¢˜æ­å»ºåšå®¢çš„è¿‡ç¨‹ã€‚","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"Hugo [1]æ˜¯ä¸€ä¸ªç”¨ go è¯­è¨€ç¼–å†™çš„å¼€æº[2]ç½‘ç«™æ„å»ºæ¡†æ¶ï¼Œæˆªæ­¢ç›®å‰ GitHub æ˜Ÿæ•°è¶…è¿‡70kï¼Œå®ƒå…·æœ‰åŠŸèƒ½å¼ºå¤§çš„æ¨¡æ¿ç³»ç»Ÿã€ä¸°å¯Œçš„ä¸»é¢˜ã€å®Œå–„çš„æ–‡æ¡£ä»¥åŠå…¨å¹³å°æ”¯æŒçš„å®¢æˆ·ç«¯ï¼Œæä¾›å¼€ç®±å³ç”¨çš„åˆ†ç±»ç³»ç»Ÿã€è¯„è®ºç³»ç»Ÿã€ä»£ç é«˜äº®ã€å¤šè¯­è¨€æ”¯æŒç­‰åŠŸèƒ½ï¼Œéå¸¸é€‚åˆç”¨æ¥æ­å»ºåšå®¢ç½‘ç«™ã€‚ åœ¨æœ¬åœ°æ’°å†™é˜¶æ®µï¼Œå€ŸåŠ© Hugo å†…ç½®æœåŠ¡å™¨å¯ä»¥åšåˆ°æ¯«ç§’çº§çƒ­æ›´æ–°ï¼Œå®ç°æ‰€è§å³æ‰€å¾—ã€‚åŒæ—¶ï¼Œå¾—ç›Šäº Hugo é‡‡ç”¨é™æ€ç«™ç‚¹ç”Ÿæˆ[3]çš„æ¶æ„ï¼ŒHugo ç«™ç‚¹å¯ä»¥å¾ˆå®¹æ˜“çš„éƒ¨ç½²åˆ°å„ç§ HTTP æœåŠ¡å™¨ï¼Œä¸”é€šè¿‡æœ¬åœ°é¢„è§ˆå³å¯ç¡®è®¤çº¿ä¸Šéƒ¨ç½²æ•ˆæœã€‚ åŸºäºæˆæœ¬å’Œä½¿ç”¨ä¹ æƒ¯è€ƒè™‘ï¼Œé€‰æ‹©ä½¿ç”¨ GitHub Pages è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶ä¸”æ ¹æ®åŠŸèƒ½ä¸åŒè¿›è¡Œä»“åº“æ‹†åˆ†ã€‚è¯ä¸å¤šè¯´ï¼Œæ¥å¼€å§‹å§ã€‚ ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:0:0","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"ç¯å¢ƒå®‰è£… Hugo åˆ†ä¸ºæ ‡å‡†å’Œæ‰©å±•ä¸¤ä¸ªç‰ˆæœ¬ï¼Œæ‰©å±•ç‰ˆæ”¯æŒ WebP å›¾åƒå¤„ç†ä»¥åŠ Dart Sassï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©å®‰è£…æ‰©å±•ç‰ˆæœ¬ã€‚ å‚è€ƒå®˜æ–¹å®‰è£…æŒ‡å—[4]ï¼Œå‰ç½®å‡†å¤‡éœ€è¦å®‰è£… Gitã€Go å’Œ Dart Sass [5]ï¼Œmacç³»ç»Ÿå¯ç›´æ¥ä½¿ç”¨ homebrew è¿›è¡Œå®‰è£…ï¼Œæˆ‘çš„ç”µè„‘ä¸Š Git å’Œ Go å·²ç»å®‰è£…å¥½ï¼Œåªéœ€è¦å®‰è£… Dart Sassï¼š # æ·»åŠ  tap æº $ brew tap sass/sass # å®‰è£… Dart Sass $ brew install sass/sass/sass # éªŒè¯ $ sass --version 1.69.5 å®‰è£… Hugoï¼š # Hugo å®‰è£… $ brew install hugo # éªŒè¯ $ hugo version hugo v0.120.4-f11bca5fec2ebb3a02727fb2a5cfb08da96fd9df+extended darwin/arm64 BuildDate=2023-11-08T11:18:07Z VendorInfo=brew å¯ä»¥çœ‹åˆ° hugo ç‰ˆæœ¬ä¿¡æ¯ä¸­åŒ…å« +extended ä¿¡æ¯ï¼Œè¯´æ˜å®‰è£…çš„æ˜¯ Hugo æ‰©å±•ç‰ˆã€‚ ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:1:0","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"åšå®¢åˆ›å»º ä» Hugo ä¸»é¢˜ç«™[6]æŒ‘é€‰è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ï¼Œå¤§å¤šæ•°ä¸»é¢˜éƒ½æœ‰ demo å¯ä»¥ä½“éªŒï¼Œæˆ‘é€‰çš„æ˜¯ FixItã€‚ ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:2:0","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"GitHub ä»“åº“å‡†å¤‡ æ¥ä¸‹æ¥åˆ›å»ºä¸‰ä¸ª GitHub ä»“åº“ï¼š GitHub Pages ä»“åº“ï¼šä»“åº“åå‰ç¼€å¿…é¡»ä½¿ç”¨ç”¨æˆ·åï¼Œæ ¼å¼ä¸º\u003cusername\u003e.github.ioï¼Œå¿…é¡»ä¸ºå…¬å¼€ä»“åº“ï¼Œç”¨äºåšå®¢éƒ¨ç½²ã€‚ åšå®¢ä»“åº“ï¼šå¯éšæ„å‘½åå¦‚ myblogï¼Œç§æœ‰ä»“åº“ï¼Œç”¨äºå­˜å‚¨åšå®¢æºä»£ç ï¼ŒåŒ…æ‹¬æ–‡ç« å’Œé…ç½®ã€‚ ä¸»é¢˜ä»“åº“ï¼šä» FixIt æºä»£ç åº“[7] forkï¼Œç”¨äºè‡ªå®šä¹‰é…ç½®ä¸»é¢˜ï¼Œå¦å¤–æˆ‘ fork è¿‡æ¥åå°†é»˜è®¤åˆ†æ”¯ä» master é‡å‘½åæˆäº† mainã€‚ ä¸‰ä¸ªä»“åº“çš„å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š åšå®¢ä»“åº“å°†ä¸»é¢˜ä»¥ submodule çš„å½¢å¼å¯¼å…¥åˆ° themes æ–‡ä»¶å¤¹ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šä½¿ç”¨çš„ä¸»é¢˜ï¼›å½“åšå®¢ä»“åº“çš„ä»£ç æäº¤åˆ° main åˆ†æ”¯æ—¶ï¼Œä¼šè§¦å‘ GitHub Actions å°† Hugo æ„å»ºå¥½çš„é™æ€ç«™ç‚¹æ–‡ä»¶éƒ¨ç½²åˆ° GitHub Pages ä»“åº“ï¼Œç”¨æˆ·å³å¯é€šè¿‡ GitHub Pages åŸŸåè¿›è¡Œåšå®¢è®¿é—®ã€‚ ä¸‰ä¸ªä»“åº“ä¸­ï¼Œåªæœ‰ GitHub pages ä»“åº“æ˜¯å¿…é¡»çš„ï¼Œå¦‚æœä¸åœ¨æ„åšå®¢å†…å®¹å’Œæºä»£ç éšç§æ€§ï¼Œå¯ä»¥å»æ‰ myblog ä»“åº“ï¼Œå°†åšå®¢æºä»£ç å­˜å‚¨åˆ° \u003cusername\u003e.github.io ä»“åº“ä¸­ï¼ŒGitHub Pages æ”¯æŒä½¿ç”¨ç‰¹å®šåˆ†æ”¯ï¼ˆé»˜è®¤æ˜¯ gh-pagesï¼‰éƒ¨ç½²ã€‚å¦‚æœä¸å‡†å¤‡è‡ªå®šä¹‰ä¿®æ”¹ä¸»é¢˜ï¼Œå¯ä»¥å»æ‰ FixIt ä»“åº“ï¼Œç›´æ¥ä½¿ç”¨å®˜æ–¹æºä»£ç ä»“åº“æˆ–è€…é€šè¿‡ Hugo module è¿›è¡Œä¸»é¢˜å®‰è£…ã€‚ ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:2:1","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"åšå®¢ç«™ç‚¹åˆ›å»º ä»“åº“å‡†å¤‡å¥½ä¹‹åï¼Œå¯ä»¥é€šè¿‡ Hugo å‘½ä»¤è¡Œå·¥å…·[8]å¿«é€Ÿåˆ›å»ºç«™ç‚¹ï¼ŒHugo é»˜è®¤ä½¿ç”¨ toml æ ¼å¼é…ç½®ï¼ŒåŒæ—¶æ”¯æŒ yaml å’Œ jsonï¼Œæˆ‘çš„åšå®¢ä½¿ç”¨ yamlï¼š $ hugo new site --format yaml myblog # åˆ‡æ¢åˆ°åšå®¢ä»“åº“ç›®å½• $ cd myblog # åˆå§‹åŒ– git ä»“åº“ $ git init $ git add . $ git commit -m \"feat: init hugo site\" # ç»‘å®šè¿œç¨‹åšå®¢ä»“åº“ $ git remote add origin git@github.com:will4j/myblog.git $ git push -u origin main # å¢åŠ ä¸»é¢˜å­æ¨¡å— # è¿™é‡Œå› ä¸º fork ä¸»é¢˜ä»“åº“è·Ÿåšå®¢ä»“åº“åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œé‡‡ç”¨ç›¸å¯¹è·¯å¾„å¼•å…¥ $ git submodule add ../FixIt.git themes/FixIt # è®¾ç½®ä¸»é¢˜ $ echo \"theme: FixIt\" \u003e\u003e hugo.yaml $ cat hugo.yaml baseURL: https://example.org/ languageCode: en-us title: My New Hugo Site theme: FixIt Hugo é»˜è®¤çš„ç«™ç‚¹ç›®å½•ç»“æ„[9]å¦‚ä¸‹ï¼š archetypesï¼šåŸå‹ç›®å½•ï¼Œç”¨äºå®šä¹‰å„ç§ç±»å‹çš„å†…å®¹æ¨¡æ¿ã€‚åŸå‹åŒ¹é…é¡ºåºæ˜¯ä¼˜å…ˆæœ¬ç«™ç‚¹å†…ï¼Œå…¶æ¬¡å†åˆ°ä¸»é¢˜å†…æŸ¥æ‰¾ã€‚ assetsï¼šèµ„äº§ç›®å½•ï¼Œç”¨äºæ”¾ç½® CSSï¼ŒJavaScript ç­‰å…¨å±€èµ„æºåº“ã€‚ configï¼šé…ç½®æ–‡ä»¶ç›®å½•ï¼Œä¸»é…ç½®æ–‡ä»¶ hugo.yamlï¼Œæ”¯æŒå¤šæ–‡ä»¶é…ç½®ã€å¤šç¯å¢ƒé…ç½®[10]ã€‚ contentï¼šå†…å®¹ç›®å½•ï¼Œç”¨äºæ”¾ç½®æ–‡ç« ã€åˆ†ç±»ã€æ ‡ç­¾ç­‰å†…å®¹é¡µé¢ã€‚ dataï¼šæ•°æ®ç›®å½•ï¼Œç”¨äºå­˜å–è‡ªå®šä¹‰é…ç½®æ•°æ®ã€‚ i18nï¼šå›½é™…åŒ–ç›®å½•ï¼Œç”¨äºé¡µé¢æ–‡æœ¬çš„å¤šè¯­è¨€ç¿»è¯‘ã€‚ layoutsï¼šå¸ƒå±€ç›®å½•ï¼Œç”¨äºæ”¾ç½® html æ¨¡æ¿ã€‚ publicï¼šéƒ¨ç½²ç›®å½•ï¼Œç”¨äºå­˜æ”¾ Hugo æ„å»ºçš„é™æ€ç«™ç‚¹æ–‡ä»¶ã€‚ resourcesï¼šèµ„æºç›®å½•ï¼ŒåŒ…å« Hugo èµ„äº§æ„å»ºæµæ°´çº¿äº§ç”Ÿçš„å¯ç¼“å­˜æ–‡ä»¶ï¼Œå¦‚ CSSã€å›¾ç‰‡ç­‰ã€‚ staticï¼šé™æ€èµ„æºç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šè¢«ç›´æ¥æ‹·è´åˆ°ç«™ç‚¹æ ¹ç›®å½•ã€‚ themesï¼šä¸»é¢˜ç›®å½•ï¼ŒåŒ…å« Hugo ç«™ç‚¹å¯ä»¥ä½¿ç”¨çš„ä¸»é¢˜ã€‚ å¯é€šè¿‡ Hugo mounts é…ç½®[11]è‡ªå®šä¹‰ç«™ç‚¹ç›®å½•ç»“æ„ã€‚ ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:2:2","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"æ–‡ç« åˆ›å»ºåŠé¢„è§ˆ Hugo æ”¯æŒ Page bundles [12]æ¨¡å¼ï¼Œå³æ–‡ç« å†…å®¹æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œå†…éƒ¨å¯ä»¥ç‹¬ç«‹åŒ…å«å›¾ç‰‡ã€å­é¡µé¢ç­‰é™æ€èµ„æºï¼Œæ–‡ç« ä»¥ index.md ä½œä¸ºå…¥å£ï¼Œå¯åŸºäº FixIt ä¸»é¢˜æä¾›çš„ post-bundle åŸå‹è¿›è¡Œè‡ªå®šä¹‰ä¿®æ”¹ï¼š # æ‹·è´ä¸»é¢˜åŸå‹åˆ°ç«™ç‚¹ç›®å½• $ cp -r themes/FixIt/archetypes/post-bundle archetypes # å¢åŠ åšå®¢å›¾ç‰‡ç›®å½•ï¼Œæœ€ç»ˆç»“æ„å¦‚ä¸‹ï¼Œæ³¨æ„ç©ºç›®å½•åœ¨åŸå‹ä½¿ç”¨æ—¶ä¸ä¼šç”Ÿæ•ˆ $ tree -a archetypes/post-bundle archetypes/post-bundle â”œâ”€â”€ images â”‚ â””â”€â”€ .gitkeep â””â”€â”€ index.md # åˆ›å»º Page bundles æ–‡ç«  $ hugo new content --kind post-bundle posts/hello-world # æ–‡ç« ç›®å½•ç»“æ„ $ tree -a content/posts/hello-world content/posts/hello-world â”œâ”€â”€ images â”‚ â””â”€â”€ .gitkeep â””â”€â”€ index.md # æ·»åŠ  markdown å†…å®¹ $ echo \"\\n## Hello World\" \u003e\u003e content/posts/hello-world/index.md ä¸Šé¢çš„å‘½ä»¤å·²ç»æˆåŠŸé…ç½®ä¸»é¢˜å¹¶åˆ›å»ºäº†ä¸€ç¯‡æ–‡ç« ï¼Œç°åœ¨å¯ä»¥é€šè¿‡hugo server --buildDraftså‘½ä»¤å¯åŠ¨æœ¬åœ°é¢„è§ˆæœåŠ¡ï¼Œè®¿é—®å¯åŠ¨ä¿¡æ¯ä¸­æ˜¾ç¤ºçš„åœ°å€ï¼Œå¦‚http://localhost:1313ï¼Œè¿›å…¥é¦–é¡µï¼Œç‚¹å‡»æ–‡ç« å³å¯é¢„è§ˆåšå®¢ï¼š æŸ¥çœ‹æ–‡ç«  index.mdï¼Œå…¶å†…å®¹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå‰ç½®é¡µ[13]å’Œæ–‡ç« ä¸»ä½“ã€‚å‰ç½®é¡µç”¨äºé…ç½®æ–‡ç« å…ƒæ•°æ®ï¼Œå¦‚æ ‡é¢˜ã€åˆ†ç±»ã€æ ‡ç­¾ç­‰æ˜¾ç¤ºè®¾ç½®ä»¥åŠè¯„è®ºæ˜¯å¦å¼€å¯ç­‰æ§åˆ¶å¼€å…³ï¼Œæ–‡ç« ä¸»ä½“æ˜¯ markdown å†…å®¹ã€‚ä¸‹é¢æ˜¯ä¸€æ®µå‰ç½®é¡µç¤ºä¾‹ï¼Œyaml æ ¼å¼å‰ç½®é¡µç”±---åŒ…è£¹ï¼š # content/posts/hello-world/index.md --- # æ–‡ç« æ ‡é¢˜ title: Index # æ–‡ç« åˆ›å»ºæ—¶é—´ date: 2023-11-22T06:51:28+08:00 # æ˜¯å¦è‰ç¨¿ draft: true # æ ‡ç­¾å’Œåˆ†ç±» tags: - draft categories: - draft --- å‰ç½®é¡µé™¤äº† Hugo é¢„å®šä¹‰çš„æ ‡ç­¾å¤–ï¼Œä¹Ÿæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰æ ‡ç­¾ï¼Œæ¯”å¦‚ FixIt ä¸»é¢˜å°±å®šä¹‰äº†å¾ˆå¤šè‡ªå®šä¹‰å‰ç½®é¡µæ ‡ç­¾[14]ã€‚ è‡³æ­¤ï¼Œåšå®¢ç«™ç‚¹çš„åŸºæœ¬æ¡†æ¶å°±æ­èµ·æ¥äº†ã€‚ ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:2:3","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"åšå®¢é…ç½® é€šè¿‡ Hugo å’Œ FixIt ä¸»é¢˜é…ç½®æ¥è°ƒæ•´åšå®¢æ˜¾ç¤ºå¸ƒå±€ï¼Œé…ç½®æ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼š $ tree -a config/_default config/_default â”œâ”€â”€ author.yaml # ä½œè€…ä¿¡æ¯é…ç½® â”œâ”€â”€ hugo.yaml # Hugo ä¸»é…ç½® â”œâ”€â”€ languages.yaml # å¤šè¯­è¨€é…ç½® â”œâ”€â”€ menus.yaml # èœå•é…ç½®ï¼Œèœå•ä¹Ÿæ”¯æŒå¤šè¯­è¨€ï¼Œå½“å‰åªé…ç½®ä¸­æ–‡ â”œâ”€â”€ module.yaml # æ¨¡å—ã€ç›®å½•æŒ‚è½½é…ç½®ç­‰ â”œâ”€â”€ outputs.yaml # è¾“å‡ºæ ¼å¼é…ç½® â”œâ”€â”€ params.yaml # é¢å¤–å‚æ•°é…ç½®ï¼Œä¸»é¢˜é…ç½®ä¸»è¦åœ¨è¿™ä¸ªæ–‡ä»¶ â”œâ”€â”€ permalinks.yaml # ç«™ç‚¹è·¯å¾„æ˜ å°„ â””â”€â”€ sitemap.yaml # ç«™ç‚¹åœ°å›¾é…ç½®ï¼Œä¸»è¦ç”¨äº seo ä¼˜åŒ– é…ç½®æ–‡ä»¶æ¥æºäº Hugo å®šä¹‰å˜é‡[15] å’Œ FixIt ä¸»é¢˜å®šä¹‰å˜é‡[16]ã€‚æœ€ç»ˆå±•ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:3:0","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"é¡¶éƒ¨èœå• åˆ›å»ºé¦–é¡µã€æ–‡ç« ã€åˆ†ç±»å’Œæ ‡ç­¾å››ä¸ªèœå•ï¼Œè°ƒæ•´ä¸­æ–‡å‘½åã€‚FixIt ä¸»é¢˜æ”¯æŒ FontAwesome å›¾æ ‡[17]ï¼Œå¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½æŒ‘é€‰ã€‚ # config/_default/menus.yaml --- # https://gohugo.io/content-management/menus # https://gohugo.io/content-management/multilingual/#menus # https://fixit.lruihao.cn/documentation/basics/#menu-configuration # https://fontawesome.com/icons main: - identifier: home name: é¦–é¡µ url: / weight: 1 params: icon: fa-solid fa-home - identifier: posts name: æ–‡ç«  url: /posts/ weight: 2 params: draft: false icon: fa-solid fa-archive - identifier: categories name: åˆ†ç±» url: /categories/ weight: 3 params: icon: fa-solid fa-th-list - identifier: tags name: æ ‡ç­¾ url: /tags/ weight: 4 params: icon: fa-solid fa-tags ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:3:1","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"æœç´¢æ”¯æŒ FixIt ä¸»é¢˜æ”¯æŒ Lunr.jsã€algolia å’Œ Fuse.js ä¸‰ç§æœç´¢æ–¹å¼ã€‚ å‰ç½®æ¡ä»¶éœ€è¦å¢åŠ  json è¾“å‡ºæ ¼å¼ï¼Œä»¥ç”Ÿæˆæœç´¢ä¾èµ–çš„ index.jsonï¼š # config/_default/outputs.yaml --- # https://gohugo.io/templates/output-formats/#customizing-output-formats # https://gohugo.io/templates/output-formats/#output-format-definitions home: - html - rss - json page: - html - markdown é…ç½®ä½¿ç”¨ Fuse.js æœç´¢ï¼Œå¿½ç•¥å¤§å°å†™ï¼š # config/_default/params.yaml --- # https://fixit.lruihao.cn/documentation/basics/#search-configuration search: enable: true type: fuse fuse: # https://fusejs.io/api/options.html isCaseSensitive: false ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:3:2","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"åšå®¢æ ‡é¢˜ ä¿®æ”¹é»˜è®¤é¡¶éƒ¨æ ‡é¢˜ï¼Œå»é™¤ logoï¼Œä½¿ç”¨ fa å›¾æ ‡ï¼Œå¢åŠ æ‰“å­—ç‰¹æ•ˆï¼š # config/_default/params.yaml --- header: title: logo: \"\" name: Programmer William Wang pre: \u003ci class=\"fa fa-code\"\u003e\u0026nbsp\u003c/i\u003e typeit: true åœ¨æ ‡é¢˜å·¦è¾¹å¢åŠ  GitHub è§’ï¼š # config/_default/params.yaml --- githubCorner: enable: true permalink: \"https://github.com/will4j\" title: \"Visit Me on GitHub\" position: left ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:3:3","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"é¦–é¡µèµ„æ–™ åœ¨é¦–é¡µå±•ç¤ºä¸ªäººå¤´åƒå’Œè”ç³»æ–¹å¼ï¼š # config/_default/params.yaml --- home: profile: enable: true subtitle: The last leg of a journey just marks the halfway point. avatarMenu: github avatarURL: /img/avatar.png social: GitHub: will4j Email: williamw0825@gmail.com RSS: true ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:3:4","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"ä¸­æ–‡è¯­è¨€ åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ç«™ç‚¹é»˜è®¤è¯­è¨€ï¼š # config/_default/hugo.yaml --- # Content without language indicator will default to this language. defaultContentLanguage: zh-cn languageCode: en defaultContentLanguageInSubdir: false é€šè¿‡å¤šè¯­è¨€é…ç½®æ–‡ä»¶å•ç‹¬é…ç½®ä¸­æ–‡ï¼š # config/_default/languages.yaml --- # https://gohugo.io/content-management/multilingual/#configure-languages zh-cn: # è¿™é‡Œå¤§å°å†™å¾ˆé‡è¦ï¼Œå®šä¹‰ç½‘ç«™ html lang languageCode: zh-CN languageName: ç®€ä½“ä¸­æ–‡ # If true, auto-detect Chinese/Japanese/Korean Languages in the content. # This will make .Summary and .WordCount behave correctly for CJK languages. hasCJKLanguage: true title: ç¨‹åºå‘˜æ°´ç‹ params: description: ç¨‹åºå‘˜æ°´ç‹çš„ä¸ªäººåšå®¢ home: profile: subtitle: è¡Œç™¾é‡Œè€…åŠä¹åã€‚ header: title: name: ç¨‹åºå‘˜æ°´ç‹ app: title: ç¨‹åºå‘˜æ°´ç‹ ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:3:5","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"ä½œè€…ä¿¡æ¯ é…ç½®æ–‡ç« ä½œè€…çš„åç§°ã€å¤´åƒç­‰ä¿¡æ¯ï¼š # config/_default/author.yaml --- name: æ°´ç‹ email: williamw0825@gmail.com link: https://github.com/will4j avatar: img/avatar.png å¤´åƒå›¾ç‰‡æ”¾ç½®åˆ° assets ç›®å½•ä¸‹ï¼š $ tree -a assets assets â””â”€â”€ img â””â”€â”€ avatar.png ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:3:6","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"åˆ†ç±»åˆ«å åœ¨ categories ç›®å½•ä¸‹åˆ›å»ºåˆ†ç±»åç§°æ–‡ä»¶å¤¹åŠå¯¹åº” _index.mdï¼š $ tree -a content/categories content/categories â”œâ”€â”€ _index.md â””â”€â”€ blog-build â””â”€â”€ _index.md # content/categories/_index.md --- slug: \"categories\" title: \"åˆ†ç±»\" --- # content/categories/blog-build/_index.md --- slug: \"blog-build\" title: \"å»ºç«™ç¬”è®°\" description: \"åšå®¢å»ºç«™è¿‡ç¨‹è®°å½•\" --- ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:3:7","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"é¡µè„šé…ç½® é¡µè„šå¢åŠ ç«™ç‚¹è¿è¡Œæ—¶é•¿ç»Ÿè®¡ã€å¼€æºè¯ä¹¦é…ç½®ç­‰ï¼š # config/_default/params.yaml --- footer: enable: true since: 2023 hugo: true siteTime: enable: true value: \"2023-11-16T07:40:29+08:00\" visitor: enable: false license: '\u003ca rel=\"license external nofollow noopener noreferrer\" href=\"https://creativecommons.org/licenses/by-nc/4.0/\" target=\"_blank\"\u003eCC BY-NC 4.0\u003c/a\u003e' order: powered: 1 copyright: last statistics: first å…¶ä¸­ï¼Œä¿®æ”¹ FixIt ä¸»é¢˜ï¼Œå¢åŠ äº†footer.visitor.enableå‚æ•°ï¼Œç”¨äºåœ¨å¼€å¯ä¸è’œå­æ—¶éšè—å…¨ç«™è®¿é—®é‡ç»Ÿè®¡ï¼š # themes/FixIt/layouts/partials/footer.html -- {{- if eq .Site.Params.ibruce.enable true -}} ++ {{- if .Site.Params.ibruce.enable | and .Site.Params.footer.visitor.enable -}} ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:3:8","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"é˜…è¯»æ•°ç»Ÿè®¡ å¼€å¯ä¸è’œå­è®¿é—®ç»Ÿè®¡ï¼š # config/_default/params.yaml --- # Busuanzi count ibruce: enable: true enablePost: true ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:3:9","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"CDN åŠ é€Ÿ ä½¿ç”¨ jsdelivr å¯¹ cssã€js åº“çš„é™æ€èµ„æºè¿›è¡Œ cdn åŠ é€Ÿï¼š # config/_default/params.yaml --- # https://fixit.lruihao.cn/documentation/basics/#cdn-configuration cdn: data: jsdelivr.yml ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:3:10","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"åšå®¢éƒ¨ç½² ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:4:0","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"éƒ¨ç½²å¯†é’¥é…ç½® é¦–å…ˆéœ€è¦é…ç½®éƒ¨ç½²å¯†é’¥[18]ï¼Œåœ¨ GitHub Pages ä»“åº“æ·»åŠ å…¬é’¥ï¼Œå¹¶å…è®¸å†™å…¥æƒé™ï¼š åœ¨åšå®¢ä»“åº“ Actions å¯†é’¥ä¸­æ·»åŠ  GitHub Pages ä»“åº“éƒ¨ç½²ç§é’¥ï¼š ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:4:1","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"GitHub Action é…ç½® åœ¨åšå®¢ä»“åº“å¢åŠ  Workflows é…ç½®æ–‡ä»¶[19]ï¼š # .github/workflows/deploy-to-github-pages.yaml --- # https://github.com/actions/starter-workflows/blob/main/pages/hugo.yml name: Deploy to Github Pages on: push: branches: [ main ] # Allows you to run this workflow manually from the Actions tab workflow_dispatch: # Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages permissions: contents: read metadata: read packages: read jobs: build: runs-on: ubuntu-22.04 concurrency: group: ${{ github.workflow }}-${{ github.ref }} env: HUGO_VERSION: 0.120.4 steps: - name: Install Dart Sass run: sudo snap install dart-sass - name: Setup Go uses: actions/setup-go@v4 with: go-version: \"^1.21.4\" - run: go version - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: ${{ env.HUGO_VERSION }} extended: true - name: Checkout Source Code uses: actions/checkout@v4 with: submodules: recursive fetch-depth: 0 - name: Build with Hugo env: # For maximum backward compatibility with Hugo modules HUGO_ENVIRONMENT: production HUGO_ENV: production run: hugo --minify --gc - name: Deploy ğŸš€ uses: peaceiris/actions-gh-pages@v3 # https://github.com/peaceiris/actions-gh-pages with: deploy_key: ${{ secrets.PAGES_DEPLOY_KEY }} external_repository: will4j/will4j.github.io publish_dir: ./public publish_branch: main user_name: 'github-actions[bot]' user_email: 'github-actions[bot]@users.noreply.github.com' full_commit_message: ${{ github.event.head_commit.message }} ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:4:2","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"æ€»ç»“ é€šè¿‡ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºåšå®¢ç«™ç‚¹ï¼Œå¤§é‡å‡å°‘äº†ç½‘ç«™æ­å»ºéœ€è¦åšçš„é‡å¤å·¥ä½œï¼ŒåŒæ—¶ Hugo ä¹Ÿå…·å¤‡çµæ´»æ‰©å±•çš„èƒ½åŠ›ï¼Œç»™ç”¨æˆ·æä¾›äº†æå¤§çš„è‡ªå®šä¹‰ç©ºé—´ã€‚ GitHub å·¥ä½œæµçš„å¼•å…¥ï¼Œä½¿ä½œè€…å¯ä»¥ä¸“æ³¨äºåšå®¢å†™ä½œæœ¬èº«ï¼Œæœ¬åœ°é¢„è§ˆåæäº¤ä»£ç å³å¯è§¦å‘åšå®¢æ›´æ–°å‘å¸ƒï¼Œæ•´ä½“å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:5:0","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["blog-build"],"content":"å‚è€ƒèµ„æ–™ [1]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šWhat is Hugo [2]. GitHub: Hugo æºä»£ç ä»“åº“ [3]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šBenefits of static site generators [4]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šInstallation [5]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šTranspile Sass to CSS [6]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šHugo ä¸»é¢˜ç«™ [7]. GitHub: FixIt æºä»£ç ä»“åº“ [8]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šHugo å‘½ä»¤è¡Œå·¥å…· [9]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šHugo ç›®å½•ç»“æ„ [10]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šHugo é…ç½®æ–‡ä»¶ç›®å½• [11]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šHugo ç›®å½•æŒ‚è½½ [12]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šPage bundles [13]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šå‰ç½®é¡µ [14]. FixIt å®˜æ–¹æ–‡æ¡£ï¼šå‰ç½®é¡µé…ç½® [15]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šHugo å®šä¹‰å˜é‡åˆ—è¡¨ [16]. FixIt å®˜æ–¹æ–‡æ¡£ï¼šä¸»é¢˜é…ç½® [17]. FontAwesome å›¾æ ‡ [18]. GitHub æ–‡æ¡£ï¼šè®¾ç½®éƒ¨ç½²å¯†é’¥ [19]. Hugo å®˜æ–¹æ–‡æ¡£ï¼šé€šè¿‡ GitHub Pages éƒ¨ç½² ","date":"2023-11-20","objectID":"/posts/create-blog-with-hugo-and-theme-fixit/:6:0","tags":["Hugo","FixIt"],"title":"ä½¿ç”¨ Hugo å’Œ FixIt ä¸»é¢˜åˆ›å»ºä¸ªäººåšå®¢","uri":"/posts/create-blog-with-hugo-and-theme-fixit/"},{"categories":["python-lang"],"content":"ä»å‡½æ•°å¼ç¼–ç¨‹å’Œè¯­æ³•ç³–è§’åº¦è¯¦è§£ Python è£…é¥°å™¨åŸç†ã€‚","date":"2023-11-14","objectID":"/posts/python-decorator-explained/","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":" å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚â€”ã€Šè®ºè¯­Â·å«çµå…¬ã€‹ æœ¬æ–‡ä»è£…é¥°å™¨ä½¿ç”¨åˆ°çš„å‡½æ•°å¼ç¼–ç¨‹ç‰¹æ€§å…¥æ‰‹ï¼Œè®¨è®ºäº†æ— å‚è£…é¥°å™¨ã€æœ‰å‚è£…é¥°å™¨ä»¥åŠç±»è£…é¥°å™¨ä¸‰ç§è¯­æ³•ç³–è§„åˆ™ä¸‹è£…é¥°å™¨çš„å®ç°ï¼Œå¦å¤–æ‰©å±•è®¨è®ºäº†åŸºäºç±»çš„å®ç°æ–¹å¼ã€‚ æ€»ç»“éƒ¨åˆ†æä¾›äº†ä¸€äº›å®ç”¨è£…é¥°å™¨çš„å‚è€ƒèµ„æ–™ï¼Œåè®°éƒ¨åˆ†æ˜¯ä½œè€…å¯¹è®¾è®¡çš„ä¸€äº›æ€è€ƒï¼Œä»¥åŠè¡Œæ–‡è¿‡ç¨‹ä¸­å‘ç°çš„ä¸€äº›å†å²äº‹ä»¶ã€å¥‡é—»è½¶äº‹ã€‚ å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è£…é¥°å™¨ï¼Œå…¨æ–‡æ€ç»´å¯¼å›¾å¦‚ä¸‹ï¼š ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:0:0","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"é—®é¢˜åœºæ™¯ æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªé€šç”¨çš„æ—¥å¿—è£…é¥°å™¨ï¼Œå…¶ä½œç”¨æ˜¯åœ¨å‡½æ•°è°ƒç”¨ä¹‹åè®°å½•å‚æ•°å’Œè¿”å›å€¼ï¼Œäºæ˜¯åœ¨Googleä¸€ç•ªä¹‹åï¼Œå†™ä¸‹äº†ä¸‹é¢çš„ä»£ç ï¼š import functools import logging logging.basicConfig(level=logging.INFO) logger = logging.getLogger(__name__) def log(func): @functools.wraps(func) def wrapper(*args, **kwargs): result = func(*args, **kwargs) logger.info(\"function %s called with args=%s kwargs=%s and result=%s\", func.__name__, args, kwargs, result) return result return wrapper @log def greeting(name, say=\"Hello\"): return f\"{say} {name}!\" ç°åœ¨æ‰§è¡Œgreetingå‡½æ•°ä¼šäº§ç”Ÿå¦‚ä¸‹è¾“å‡ºï¼š \u003e\u003e\u003e greeting(\"World\", say=\"Hi\") INFO:__main__:function greeting called with args=('World',) kwargs={'say': 'Hi'} and result=Hi World! 'Hi World!' çœ‹èµ·æ¥è¿˜ä¸é”™ï¼Ÿå®ƒè¶³å¤Ÿé€šç”¨ï¼Œå› ä¸ºä½¿ç”¨äº†*argså’Œ**kwargsï¼Œä»»ä½•ä¸åŒç­¾åçš„å…¶ä»–å‡½æ•°éƒ½èƒ½é€šè¿‡logè£…é¥°å™¨æ‰“å°æ—¥å¿—ã€‚ä½†ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚@functools.wrapsåœ¨è¿™é‡Œèµ·ä»€ä¹ˆä½œç”¨ï¼Ÿå¦‚æœéœ€è¦è‡ªå®šä¹‰ä¸åŒçš„æ—¥å¿—çº§åˆ«è¯¥æ€ä¹ˆåŠï¼Ÿå¦‚æœè¦è‡ªå®šä¹‰loggeråç§°åˆè¯¥æ€ä¹ˆåŠï¼Ÿ æˆ‘éœ€è¦æ›´æ·±å…¥äº†è§£è£…é¥°å™¨ï¼Œæ‰èƒ½å›ç­”ä¸Šé¢è¿™äº›é—®é¢˜ã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:1:0","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"ç†è§£è£…é¥°å™¨ ä¹Ÿè®¸ä½ çŸ¥é“Javaä¸­çš„æ³¨è§£(@Annotation)æ˜¯é€šè¿‡åå°„å’ŒåŠ¨æ€ä»£ç†æ¥å®ç°çš„ï¼Œé‚£ä¹ˆPythonä¸­çš„è£…é¥°å™¨å‘¢ï¼Ÿå¯ä»¥çœ‹åˆ°ï¼Œlogè£…é¥°å™¨æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœæŠŠgreetingå‡½æ•°ä¸Šçš„logè£…é¥°å™¨å»æ‰ï¼Œç›´æ¥åƒä¸‹é¢è¿™æ ·è°ƒç”¨logå‡½æ•°ï¼Œå¯ä»¥å¾—åˆ°è·Ÿä½¿ç”¨è£…é¥°å™¨ä¸€æ ·çš„æ•ˆæœï¼š \u003e\u003e\u003e log(greeting)(\"World\", say=\"Hi\") INFO:__main__:function greeting called with args=('World',) kwargs={'say': 'Hi'} and result=Hi World! 'Hi World!' æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ï¼Ÿç®€å•ç›´æ¥ï¼ŒPythonè£…é¥°å™¨ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ï¼Œå³åœ¨ç›®æ ‡å‡½æ•°å¤–éƒ¨å†åŒ…è£¹ä¸€å±‚å‡½æ•°ï¼Œå¹¶åœ¨ç›®æ ‡å‡½æ•°è°ƒç”¨å‰ååŠ¨æ€å¢åŠ è¡Œä¸ºï¼Œå¾ˆå…¸å‹çš„è£…é¥°å™¨æ¨¡å¼ã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆèƒ½å¦‚æ­¤ç›´æ¥çš„åšåˆ°å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’åŠå‡½æ•°åµŒå¥—å‘¢ï¼Ÿå…ˆæ¥äº†è§£ä¸€ä¸‹å¤´ç­‰å‡½æ•°ã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:2:0","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"å¤´ç­‰å‡½æ•° å¤´ç­‰å‡½æ•°[1]ï¼Œå…¶å®æˆ‘æ›´å–œæ¬¢ç§°ä¹‹ä¸ºä¸€ç­‰å…¬æ°‘å‡½æ•°ï¼Œå³åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘ï¼Œäº«æœ‰å®Œå…¨è¡Œä¸ºèƒ½åŠ›ï¼Œèƒ½è¿›è¡Œç¼–ç¨‹è¯­è¨€å®ä½“æ‰€å…·å¤‡çš„æ‰€æœ‰æ“ä½œï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š å‡½æ•°ä½œä¸ºå®å‚ä¼ é€’ å‡½æ•°ä½œä¸ºè¿”å›å€¼ å‡½æ•°èµ‹å€¼ç»™å˜é‡ åµŒå¥—å‡½æ•°ã€åŒ¿åå‡½æ•°ã€é—­åŒ…ç­‰ åˆ†åˆ«æ¥çœ‹ä¸‹è£…é¥°å™¨ä½¿ç”¨åˆ°çš„å‡ ä¸ªç‰¹æ€§ï¼šå‡½æ•°ä½œä¸ºå®å‚ä¼ é€’ã€åµŒå¥—å‡½æ•°ä»¥åŠå‡½æ•°ä½œä¸ºè¿”å›å€¼ã€‚ å‡½æ•°ä½œä¸ºå®å‚ä¼ é€’ å…¸å‹çš„ä¾‹å­æ˜¯Pythonå†…ç½®å‡½æ•°mapï¼Œå…¶ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè½¬æ¢å‡½æ•°ï¼Œmapå‡½æ•°æ‰§è¡Œæ—¶ä¼šéå†åˆ—è¡¨ï¼Œä»¥åˆ—è¡¨å…ƒç´ ä½œä¸ºå…¥å‚è°ƒç”¨è½¬æ¢å‡½æ•°ï¼Œç„¶åå°†è½¬æ¢å‡½æ•°è¿”å›å€¼ç»„æˆæ–°çš„åˆ—è¡¨è¿”å›ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼Œå¯ä»¥å®Œæˆå¯¹åˆ—è¡¨ä¸­å…ƒç´ æ±‚å¹³æ–¹çš„è½¬æ¢ã€‚ def square(x): return x ** 2 \u003e\u003e\u003e map(square, [1, 2, 3, 4]) \u003cmap object at 0x102783520\u003e \u003e\u003e\u003e list(map(square, [1, 2, 3, 4])) [1, 4, 9, 16] åµŒå¥—å‡½æ•° å³åœ¨å‡½æ•°å†…éƒ¨åµŒå¥—å£°æ˜å‡½æ•°ï¼Œè¢«åµŒå¥—çš„å‡½æ•°ä¹Ÿå¯ä»¥ç§°ä¸ºå†…éƒ¨å‡½æ•°ã€‚å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼ˆåŒ…æ‹¬å½¢å‚ï¼‰å¯¹å†…éƒ¨å‡½æ•°å¯è§ã€‚ ä¸‹é¢çš„ä»£ç ç”¨ç‰¹å®šå­—ç¬¦æ‰“å°ä¸€ä¸ªä¸‰è¡Œçš„ä¸‰è§’å½¢ï¼Œå†…éƒ¨å‡½æ•°print_lineæ¥æ”¶è¡Œå‚æ•°nï¼Œå¹¶åœ¨å‡½æ•°ä½“ä¸­ç›´æ¥ä½¿ç”¨äº†å¤–éƒ¨å‡½æ•°çš„charå˜é‡ã€‚ def print_triangle(char): def print_line(n): print(((2 * n - 1) * char).center(5)) print_line(1) print_line(2) print_line(3) \u003e\u003e\u003e print_triangle(\"*\") * *** ***** å‡½æ•°ä½œä¸ºè¿”å›å€¼ å‡½æ•°è¿”å›å€¼å¯ä»¥æ˜¯å¦å¤–ä¸€ä¸ªå‡½æ•°ã€‚ åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œtimes_nå‡½æ•°è¿”å›productå‡½æ•°ï¼Œåè€…æ ¹æ®å‚æ•°nä¸åŒï¼Œå°†è¿”å›ä¸åŒçš„å‡½æ•°ç‰ˆæœ¬ï¼Œå› æ­¤times_n(3)å°†è¿”å›ä¹˜ä»¥3çš„productå‡½æ•°times_3ï¼Œè°ƒç”¨times_3(5)è®¡ç®—å°†å¾—åˆ°ç»“æœ15ã€‚ def times_n(n): def product(x): return x * n return product \u003e\u003e\u003e times_3 = times_n(3) \u003e\u003e\u003e times_3 \u003cfunction times_n.\u003clocals\u003e.product at 0x1027b96c0\u003e \u003e\u003e\u003e times_3(5) 15 é‡æ–°è®¤è¯†è£…é¥°å™¨ å‡½æ•°åœ¨Pythonä¸­è¢«è§†ä¸ºä¸€ç­‰å…¬æ°‘ï¼Œå¯¹å¤´ç­‰å‡½æ•°æœ‰äº†åˆæ­¥äº†è§£ä¹‹åï¼Œå¯ä»¥ä»å‡½æ•°çš„è§’åº¦é‡æ–°è®¤è¯†ä¸€ä¸‹logè£…é¥°å™¨ï¼Œå…³æ³¨å…¶ä¸­ç”¨åˆ°çš„å¤´ç­‰å‡½æ•°ç‰¹æ€§ï¼šfuncå‡½æ•°ä½œä¸ºå…¥å‚ä¼ é€’ï¼Œå†…éƒ¨å‡½æ•°wrapperä½œä¸ºè¿”å›å€¼ï¼š def log(func): # 1. funcå‡½æ•°ä½œä¸ºå…¥å‚ä¼ é€’ @functools.wraps(func) def wrapper(*args, **kwargs): # 2. åµŒå¥—å‡½æ•°(å†…éƒ¨å‡½æ•°)wrapper result = func(*args, **kwargs) logger.info(\"function %s called with args=%s kwargs=%s and result=%s\", func.__name__, args, kwargs, result) return result return wrapper # 3. å‡½æ•°ä½œä¸ºè¿”å›å€¼ å¯ä»¥æŠŠlog(greeting)(\"World\", say=\"Hi\")è¿›è¡Œåˆ†è§£ï¼š greeting = log(greeting) # å¤´ç­‰å‡½æ•°logçš„è¿”å›å€¼æ˜¯å†…éƒ¨å‡½æ•°wrapperï¼Œ # å°†wrapperèµ‹å€¼ç»™å˜é‡greetingï¼Œä¸¤è€…éƒ½æ˜¯å‡½æ•°ç±»å‹ greeting(\"World\", say=\"Hi\") # ä½¿ç”¨greetingå˜é‡æ‰§è¡Œï¼Œå®é™…è°ƒç”¨çš„æ˜¯wrapperå‡½æ•° åƒä¸Šé¢è¿™æ ·åˆ†è§£åï¼Œgreeting(\"World\", say=\"Hi\")è°ƒç”¨å·²ç»ä¸æ˜¯åŸgreetingå‡½æ•°ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯å†…éƒ¨å‡½æ•°wrapperï¼Œå› è€Œå¯ä»¥åœ¨wrapperä¸­åŠ¨æ€æ–°å¢è¡Œä¸ºï¼Œå³åœ¨å‡½æ•°è°ƒç”¨åè¾“å‡ºæ—¥å¿—ã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:2:1","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"è£…é¥°å™¨è¯­æ³•ç³– ä»å‡½æ•°çš„è§’åº¦é‡æ–°è®¤è¯†è£…é¥°å™¨åï¼Œæˆ‘ä»¬çŸ¥é“æ˜¾å¼è°ƒç”¨log(greeting)(\"World\", say=\"Hi\")å·²ç»å¯ä»¥è¾¾åˆ°è£…é¥°å™¨çš„æ•ˆæœï¼Œä¹Ÿæ¸…æ¥šäº†è°ƒç”¨çš„è¿‡ç¨‹å’ŒåŸç†ï¼Œé‚£ä¹ˆ@logçš„ä½¿ç”¨æ–¹å¼æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ å…¶å®@æ“ä½œç¬¦åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œåœ¨PEP 318[2]ä¸­æœ‰æ¸…æ™°çš„æè¿°ï¼Œå…¶è¾¾åˆ°çš„æ•ˆæœå¦‚ä¸‹ï¼Œå³ä½¿å¾—ï¼š @dec2 @dec1 def func(arg1, arg2, ...): pass ç­‰ä»·äºï¼š def func(arg1, arg2, ...): pass func = dec2(dec1(func)) åŒæ—¶æ”¯æŒæœ‰å‚è£…é¥°å™¨ï¼ˆåœ¨å‡½æ•°è£…é¥°å™¨è¿›é˜¶ä¸€èŠ‚ä¸­å°†è¯¦ç»†è®¨è®ºæœ‰å‚è£…é¥°å™¨ï¼‰ï¼Œä½¿å¾—ï¼š @decomaker(argA, argB, ...) def func(arg1, arg2, ...): pass ç­‰ä»·äºï¼š def func(arg1, arg2, ...): pass func = decomaker(argA, argB, ...)(func) ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:2:2","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"functools.wraps çš„ä½œç”¨ å†æ¥çœ‹ä¸‹@functools.wrapsçš„ä½œç”¨ã€‚ å¦‚æœå»æ‰logè£…é¥°å™¨ä¸­å†…éƒ¨å‡½æ•°wrapperä¸Šçš„@functools.wraps(func)ï¼ŒæŸ¥çœ‹greetingå‡½æ•°å¯¹è±¡ï¼Œä¼šå‘ç°å®ƒå…¶å®æ˜¯è£…é¥°å™¨å†…éƒ¨çš„wrapperå‡½æ•°ï¼Œè¿™ç¬¦åˆä¹‹å‰å¯¹è£…é¥°å™¨åŸç†çš„ç†è§£ã€‚ ... def log(func): # ç§»é™¤ @functools.wraps(func) def wrapper(*args, **kwargs): ... @log def greeting(name, say=\"Hello\"): ... \u003e\u003e\u003e greeting \u003cfunction log.\u003clocals\u003e.wrapper at 0x10459e2a0\u003e åœ¨wrapperä¸ŠåŠ ä¸Š@functools.wraps(func)åï¼Œå†æŸ¥çœ‹greetingå‡½æ•°å¯¹è±¡ï¼Œå‘ç°å®ƒä»ç„¶æ˜¯greetingå‡½æ•°ï¼š ... def log(func): @functools.wraps(func) # ä¿ç•™ wraps def wrapper(*args, **kwargs): ... @log def greeting(name, say=\"Hello\"): ... \u003e\u003e\u003e greeting \u003cfunction greeting at 0x10459f4c0\u003e æŸ¥çœ‹@functools.wrapsçš„æºç å‘ç°ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†funcå‡½æ•°çš„éƒ¨åˆ†å…ƒæ•°æ®ä¿¡æ¯å¤åˆ¶ç»™wrapperå‡½æ•°ï¼Œä½¿å…¶ä¼ªè£…æˆfuncï¼Œè¿™äº›å…ƒæ•°æ®[3]åŒ…æ‹¬ï¼šå‡½æ•°åç§°ï¼ˆ__name__ï¼‰ã€å‡½æ•°æ³¨é‡Šï¼ˆ__doc__ï¼‰ä»¥åŠå‡½æ•°æ¨¡å—è·¯å¾„ï¼ˆ__module__ï¼‰ç­‰ï¼Œè¶³å¤Ÿåº”ä»˜å¤§éƒ¨åˆ†åœºæ™¯ã€‚ æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡__wrapped__å±æ€§è®¿é—®è¢«è£…é¥°å‡½æ•°çš„çœŸèº«ï¼š \u003e\u003e\u003e greeting.__wrapped__ \u003cfunction greeting at 0x1079e2a20\u003e \u003e\u003e\u003e greeting.__wrapped__(\"World\") # è¿™é‡Œå¹¶æ²¡æœ‰æ‰“å°æ—¥å¿—ï¼Œè¯´æ˜ç¡®å®è°ƒç”¨çš„æ˜¯åŸå§‹greetingå‡½æ•° 'Hello World!' ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:2:3","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"è£…é¥°å™¨å°ç»“ è£…é¥°å™¨é€šè¿‡@è¯­æ³•ç³–ï¼Œä½¿ç”¨wrapperå‡½æ•°åŒ…è£¹å¹¶é€šè¿‡@functools.wrapsä¼ªè£…æˆç›®æ ‡å‡½æ•°funcï¼Œä»è€Œè¾¾åˆ°å¢å¼ºç›®æ ‡å‡½æ•°åŠŸèƒ½çš„ç›®çš„ã€‚ä½¿ç”¨è£…é¥°å™¨åï¼Œå®é™…è°ƒç”¨çš„æ˜¯è£…é¥°å™¨å†…çš„wrapperå‡½æ•°ï¼Œè€Œä¸å†æ˜¯funcå‡½æ•°è‡ªèº«ï¼Œç®€å•ç¤ºæ„å¦‚ä¸‹å›¾ï¼š åœ¨å¼€å¤´æåˆ°çš„ä¸‰ä¸ªé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬å·²ç»è§£ç­”äº†ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå³@functools.wrapsçš„ä½œç”¨ã€‚æ¥ä¸‹æ¥çœ‹ä¸‹å¦‚ä½•æ”¯æŒæ—¥å¿—çº§åˆ«ä»¥åŠloggeråç§°ï¼Œè¿™éœ€è¦è¿›é˜¶çš„è£…é¥°å™¨ç”¨æ³•ã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:2:4","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"å‡½æ•°è£…é¥°å™¨è¿›é˜¶ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:3:0","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"æœ‰å‚è£…é¥°å™¨ æ ¹æ®PEP 318[2]å¯¹@æ“ä½œç¬¦è¯­æ³•ç³–çš„è¯´æ˜ï¼ˆå¯ä»¥å›é¡¾ä¸€ä¸‹è£…é¥°å™¨è¯­æ³•ç³–ä¸€èŠ‚çš„å†…å®¹ï¼‰ï¼Œå¦‚æœç»™logè£…é¥°å™¨æ·»åŠ æ—¥å¿—çº§åˆ«å‚æ•°ï¼Œå…¶æ•ˆæœåº”è¯¥å¦‚ä¸‹ï¼š @log(level=logging.INFO) def greeting(name, say=\"Hello\"): ... # é‚£ä¹ˆ greeting(\"World\") # åº”è¯¥ç­‰ä»·äº log(level=logging.INFO)(greeting)(\"World\") æœ‰ç‚¹å¤ªç»•äº†ï¼ŒæŠŠä¸­é—´è¿‡ç¨‹æ‹†è§£å‡ºæ¥å†çœ‹ä¸‹ï¼š # ç¬¬ä¸€æ­¥æ¥æ”¶å‚æ•°ï¼Œè¿”å›å¯è®¿é—®å‚æ•°çš„é—­åŒ…å‡½æ•° decorator = log(level=logging.INFO) # ç”¨é—­åŒ…å‡½æ•°ä½œä¸ºæ–°çš„è£…é¥°å™¨å¯¹greetingå‡½æ•°è¿›è¡ŒåŒ…è£… greeting = decorator(greeting) # è°ƒç”¨åŒ…è£…è¿‡åè£…é¥°å™¨å‡½æ•° greeting(\"World\") å¯ä»¥çœ‹åˆ°ï¼Œç›¸æ¯”æ— å‚è£…é¥°å™¨ï¼Œæœ‰å‚è£…é¥°å™¨å¼•å…¥äº†ä¸€ä¸ªä¸­é—´å±‚ï¼Œè´Ÿè´£è¿”å›å¯è®¿é—®å…¥å‚çš„é—­åŒ…å‡½æ•°ï¼Œä¹‹åè¿™ä¸ªé—­åŒ…å‡½æ•°å°±å¯ä»¥å½“åšæ— å‚è£…é¥°å™¨æ¥ä½¿ç”¨ã€‚æ¥ä¸‹æ¥ä½¿ç”¨è¿™ç§æ–¹å¼é‡æ–°å®ç°logè£…é¥°å™¨ä»¥æ”¯æŒè‡ªå®šä¹‰æ—¥å¿—çº§åˆ«ï¼š import functools import logging logging.basicConfig(level=logging.INFO) logger = logging.getLogger(__name__) def log(level=logging.INFO): def decorator(func): @functools.wraps(func) def wrapper(*args, **kwargs): result = func(*args, **kwargs) logger.log(level, \"function %s called with args=%s kwargs=%s and result=%s\", func.__name__, args, kwargs, result) return result return wrapper return decorator \u003e\u003e\u003e @log(level=logging.WARNING) ... def greeting(name, say=\"Hello\"): ... return f\"{say} {name}!\" ... \u003e\u003e\u003e greeting(\"World\") WARNING:__main__:function greeting called with args=('World',) kwargs={} and result=Hello World! 'Hello World!' \u003e\u003e\u003e @log() ... def greeting(name, say=\"Hello\"): ... return f\"{say} {name}!\" ... \u003e\u003e\u003e greeting(\"World\") INFO:__main__:function greeting called with args=('World',) kwargs={} and result=Hello World! 'Hello World!' åˆ°ç›®å‰ä¸ºæ­¢æ•ˆæœéƒ½å¾ˆç†æƒ³âœŒï¸ã€‚ä¸è¿‡ä¸çŸ¥ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œåœ¨ä½¿ç”¨é»˜è®¤å‚æ•°æ—¶ï¼Œè£…é¥°å™¨å†™æ³•æ˜¯å¸¦ç©ºæ‹¬å·çš„@log()ï¼Œä»è£…é¥°å™¨è¯­æ³•ç³–çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸ªç©ºæ‹¬å·è¿˜ä¸èƒ½å»æ‰ï¼Œä¸ç„¶çš„è¯åŒ…è£¹ç›®æ ‡å‡½æ•°çš„ä¼šæ˜¯ä¸­é—´å±‚çš„decoratorï¼Œè€Œä¸æ˜¯æœ€ç»ˆæœŸæœ›çš„wrapperï¼Œæ¥éªŒè¯ä¸€ä¸‹ï¼š \u003e\u003e\u003e @log ... def greeting(name, say=\"Hello\"): ... return f\"{say} {name}!\" ... \u003e\u003e\u003e greeting(\"World\") \u003cfunction log.\u003clocals\u003e.decorator.\u003clocals\u003e.wrapper at 0x107a95c60\u003e æœç„¶å¦‚æ­¤ï¼Œè¿™æ—¶å€™è°ƒç”¨greetingå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯decoratorå‡½æ•°ï¼Œæ‰€ä»¥è¿”å›å€¼æ˜¯wrapperã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:3:1","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"è£…é¥°å™¨å¯é€‰å‚æ•° é‚£ä¹ˆï¼Œå¯¹äºæœ‰å‚è£…é¥°å™¨æ˜¯å¦èƒ½æ”¯æŒä¸å¸¦æ‹¬å·ä½¿ç”¨å‘¢ï¼Ÿè¿™æ ·èƒ½ä½¿è£…é¥°å™¨æ›´åŠ çµæ´»ï¼Œä¹Ÿèƒ½é¿å…å› æ‹¬å·é—æ¼å¯¼è‡´ç¼–ç é”™è¯¯ã€‚å†æ¬¡å›é¡¾è£…é¥°å™¨è¯­æ³•ç³–ï¼Œå®é™…æœŸæœ›è¾¾åˆ°çš„æ•ˆæœåº”è¯¥å¦‚ä¸‹ï¼š @log def greeting(name, say=\"Hello\"): ... # ä½¿å¾— greeting(\"World\") # ç­‰ä»·äº log(greeting)(\"World\") @log(level=logging.INFO) def greeting(name, say=\"Hello\"): ... # ä½¿å¾— greeting(\"World\") # ç­‰ä»·äº log(level=logging.INFO)(greeting)(\"World\") å³è£…é¥°å™¨éœ€è¦åŒæ—¶æ”¯æŒæœ‰å‚å’Œæ— å‚ä¸¤ç§æƒ…å†µï¼Œæ¥ä¸‹æ¥å¯¹logè£…é¥°å™¨è¿›è¡Œæ”¹é€ ï¼š import functools import logging logging.basicConfig(level=logging.INFO) logger = logging.getLogger(__name__) def log(_func=None, *, level=logging.INFO): def decorator(func): @functools.wraps(func) def wrapper(*args, **kwargs): result = func(*args, **kwargs) logger.log(level, \"function %s called with args=%s kwargs=%s and result=%s\", func.__name__, args, kwargs, result) return result return wrapper if _func is None: return decorator else: return decorator(_func) å®é™…æ•ˆæœéªŒè¯ï¼š \u003e\u003e\u003e @log ... def greeting(name, say=\"Hello\"): ... return f\"{say} {name}!\" ... \u003e\u003e\u003e greeting(\"World\") INFO:__main__:function greeting called with args=('World',) kwargs={} and result=Hello World! 'Hello World!' \u003e\u003e\u003e @log(level=logging.WARNING) ... def greeting(name, say=\"Hello\"): ... return f\"{say} {name}!\" ... \u003e\u003e\u003e greeting(\"World\") WARNING:__main__:function greeting called with args=('World',) kwargs={} and result=Hello World! 'Hello World!' æ”¹é€ ä¹‹åçš„logè£…é¥°å™¨å¢åŠ äº†_funcå‚æ•°ï¼Œæ€»ç»“æ¥è¯´ï¼Œå½“_funcä¸ºç©ºæ—¶ï¼Œlogåº”è¯¥æ˜¯æœ‰å‚è£…é¥°å™¨ï¼Œå¦åˆ™åº”è¯¥æ˜¯æ— å‚è£…é¥°å™¨ã€‚åŒæ ·çš„é€»è¾‘å¯ä»¥ä½¿ç”¨partial[4] [5]é‡æ–°å®ç°[6]ï¼Œè®©ä»£ç çœ‹èµ·æ¥æ›´ç›´è§‚ï¼ŒåŒæ—¶æå–æ—¥å¿—åç§°å’Œæ—¥å¿—æ¨¡æ¿å‚æ•°ï¼Œä½¿logè£…é¥°å™¨æ›´åŠ é€šç”¨ï¼Œæœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š import functools import logging logging.basicConfig(level=logging.INFO) def log( func=None, *, level=logging.INFO, name=__name__, fmt=\"function %s called with args=%s kwargs=%s and result=%s\", ): if func is None: return functools.partial(log, level=level, fmt=fmt) # å°†loggerè·å–æ”¾åˆ°wrapperå¤–éƒ¨ï¼Œåªä¼šåœ¨è£…é¥°å™¨è§£ææ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œé¿å…æ¯æ¬¡å‡½æ•°è°ƒç”¨éƒ½æ‰§è¡Œ logger = logging.getLogger(name) @functools.wraps(func) def wrapper(*args, **kwargs): result = func(*args, **kwargs) logger.log(level, fmt, func.__name__, args, kwargs, result) return result return wrapper è‡³æ­¤ï¼Œlogè£…é¥°å™¨å·²ç»åŸºæœ¬å®Œå–„ï¼Œå¼€å¤´æå‡ºæ¥çš„æ—¥å¿—çº§åˆ«å’Œloggeråç§°çš„é—®é¢˜ä¹Ÿå¾—åˆ°äº†è§£å†³ï¼Œä¸è¦åœä¸‹æ¥ï¼Œè·Ÿæˆ‘ä¸€èµ·ç»§ç»­å‘å‰æ¢ç´¢ã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:3:2","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"è£…é¥°å™¨åˆ«å æœ‰æ—¶å€™ï¼Œæœ‰å‚è£…é¥°å™¨çš„æŸå‡ ä¸ªå‚æ•°ä¼šåœ¨å¤šä¸ªåœºæ™¯ä¸­é‡å¤ä½¿ç”¨ï¼Œä½¿ä»£ç æ˜¾å¾—å†—ä½™ä¸”éš¾ä»¥ç»´æŠ¤ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨partialä¸ºè£…é¥°å™¨æ·»åŠ åˆ«åã€‚è¿˜æ˜¯ä»¥logä¸ºä¾‹ï¼Œè¯•ä¸‹é€šè¿‡åˆ«åæ¥è‡ªå®šä¹‰æ—¥å¿—æ¨¡æ¿ï¼š # è£…é¥°å™¨åˆ«åï¼Œè‡ªå®šä¹‰æ—¥å¿—æ¨¡æ¿ my_log = functools.partial(log, fmt=\"%s executed, args: %s kwargs: %s result: %s\") @my_log def greeting(name, say=\"Hello\"): return f\"{say} {name}!\" \u003e\u003e\u003e greeting(\"World\") INFO:__main__:greeting executed, args: ('World',) kwargs: {} result: Hello World! 'Hello World!' å‡½æ•°åˆ«åå¯ä»¥å¿«æ·æ–¹ä¾¿åœ°åšåˆ°ç‰¹å®šç­¾åçš„å¤ç”¨ï¼Œå°¤å…¶åœ¨è£…é¥°å™¨ä»¥åŠç¬¬ä¸‰æ–¹å¼•å…¥å‡½æ•°çš„ä½¿ç”¨ä¸Šï¼Œå¯ä»¥æœ‰æ•ˆæ¶ˆé™¤é‡å¤çš„ä¼ å‚é€»è¾‘ã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:3:3","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"ç±»è£…é¥°å™¨ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè£…é¥°å™¨æ¶‰åŠçš„å‚ä¸å¯¹è±¡éƒ½æ˜¯å‡½æ•°ï¼Œæ¥ä¸‹æ¥åŠ å…¥ç±»çš„åœºæ™¯ï¼Œè£…é¥°å™¨ä½œç”¨åœ¨ç±»ä¸Šæœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯è£…é¥°ç±»æ–¹æ³•ï¼Œè¿™ç§æ–¹å¼å…¶å®ä¸è£…é¥°å‡½æ•°ç›¸åŒï¼›å¦ä¸€ç§æ˜¯è£…é¥°ç±»å£°æ˜ï¼Œå…¶å®ç°ç”±PEP 3129[7]å®šä¹‰ï¼Œè¯­æ³•ç³–æ•ˆæœå¦‚ä¸‹ï¼š @foo @bar class A: pass # ç­‰ä»·äºï¼š class A: pass A = foo(bar(A)) è£…é¥°å™¨åœ¨ç±»å£°æ˜ä¸Šä¸»è¦çš„ç”¨é€”æ˜¯ä¿®æ”¹ç±»çš„å…ƒæ•°æ®ï¼Œå¹¶ä¸”å…¶ä¿®æ”¹ä¸ä¼šè¢«ç»§æ‰¿ï¼Œå…¸å‹çš„ä½¿ç”¨åœºæ™¯æ˜¯å†…ç½®è£…é¥°å™¨dataclassï¼Œå®ƒæ”¹å˜äº†ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼ŒåŒæ—¶æä¾›äº†å±æ€§å†»ç»“ï¼ˆåªè¯»ï¼‰ç­‰ç‰¹æ€§ã€‚dataclasså¤ªå¤æ‚ï¼Œä¸‹é¢ä»¥ä¸€ä¸ªç›¸å¯¹ç®€å•çš„singletonè£…é¥°å™¨[8]æ¥å®ç°è£…é¥°ç±»ï¼š import functools def singleton(cls): \"\"\"Make a class a Singleton class (only one instance)\"\"\" @functools.wraps(cls) def wrapper_singleton(*args, **kwargs): if not wrapper_singleton.instance: wrapper_singleton.instance = cls(*args, **kwargs) return wrapper_singleton.instance # ç»™wrapperå‡½æ•°åˆ›å»ºinstanceå±æ€§å¹¶åˆå§‹åŒ–ä¸ºNone wrapper_singleton.instance = None return wrapper_singleton @singleton class TheOne: pass \u003e\u003e\u003e a = TheOne() \u003e\u003e\u003e b = TheOne() \u003e\u003e\u003e a is b True \u003e\u003e\u003e a.x = 5 \u003e\u003e\u003e b.x 5 ä½¿ç”¨@singletonè£…é¥°ç±»åï¼Œç±»å®ä¾‹åˆ›å»ºå®é™…è°ƒç”¨çš„æ˜¯wrapper_singletonå‡½æ•°ï¼Œå‡½æ•°å†…éƒ¨æ§åˆ¶è¿”å›å…±äº«å®ä¾‹ï¼Œä»è€Œè¾¾åˆ°å•ä¾‹æ¨¡å¼çš„æ•ˆæœã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:3:4","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"åŸºäºç±»å®ç°è£…é¥°å™¨ é™¤äº†ä½¿ç”¨å‡½æ•°å¤–ï¼Œç”¨ç±»ä¹Ÿå¯ä»¥å®ç°è£…é¥°å™¨ï¼Œä¸€åˆ‡åªéœ€è¦ç¬¦åˆè¯­æ³•ç³–çš„è§„åˆ™ï¼Œæ‰€ä»¥å‰ææ˜¯ç±»çš„å®ä¾‹ä¹Ÿèƒ½åƒå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ï¼Œè€Œè¿™æ­£æ˜¯callable [9]ç‰¹æ€§æ‰€æ”¯æŒçš„ã€‚ åœ¨Pythonä¸­ï¼Œæ‰€æœ‰èƒ½å¤Ÿè¢«è°ƒç”¨ï¼ˆä¸ç®¡æ˜¯æœ‰å‚è¿˜æ˜¯æ— å‚ï¼‰çš„å¯¹è±¡éƒ½å±äºcallableå¯¹è±¡ï¼Œé™¤äº†æœ€ç›´è§‚çš„å‡½æ•°ï¼Œç±»ä¹Ÿæ˜¯callableå¯¹è±¡ï¼ˆè°ƒç”¨ç±»å³ç±»çš„æ„é€ å‡½æ•°ï¼‰ï¼Œå®ç°äº†__call__æ–¹æ³•çš„ç±»å®ä¾‹ä¹Ÿä¸€æ ·ã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:4:0","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"ç±»çš„__call__æ–¹æ³• ç±»çš„__call__æ–¹æ³•[10]è¾¾åˆ°çš„æ•ˆæœæ˜¯æŠŠæ‰€æœ‰å¯¹å®ä¾‹çš„è°ƒç”¨éƒ½è½¬æ¢ä¸ºå¯¹å®ä¾‹__call__æ–¹æ³•çš„è°ƒç”¨ï¼š class A: def __init__(self, name): self.name = name def __call__(self, say=\"Hi\"): return f\"{say} {self.name}\" \u003e\u003e\u003e a = A(\"World\") \u003e\u003e\u003e a() 'Hi World' \u003e\u003e\u003e a(\"Hello\") 'Hello World' ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:4:1","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"åŸºäºç±»çš„è£…é¥°å™¨å®ç° æ—¢ç„¶ç±»çš„å®ä¾‹å¯ä»¥è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆä½¿ç”¨ç±»æ¥å®ç°è£…é¥°å™¨å°±ä¸æ˜¯é—®é¢˜äº†ã€‚å°è¯•ä½¿ç”¨ç±»æ¥é‡æ–°å®ç°æ—¥å¿—æ‰“å°è£…é¥°å™¨ï¼ŒæŒ‰æƒ¯ä¾‹ï¼Œå…ˆå›é¡¾è£…é¥°å™¨è¯­æ³•ç³–ï¼Œçœ‹ä¸‹æœŸæœ›è¾¾åˆ°çš„æ•ˆæœï¼š class Log: pass @Log def greeting(name, say=\"Hello\"): ... greeting(\"World\") # åº”è¯¥ç­‰ä»·äº Log(greeting)(\"World\") @Log(level=logging.INFO) def greeting(name, say=\"Hello\"): ... greeting(\"World\") # åº”è¯¥ç­‰ä»·äº Log(level=logging.INFO)(greeting)(\"World\") åœ¨æ— å‚è£…é¥°å™¨åœºæ™¯ä¸‹ï¼Œç±»æ„é€ å™¨ä¼ å…¥ç›®æ ‡å‡½æ•°ï¼Œ__call__ä»£ç†ç›®æ ‡å‡½æ•°æ‰§è¡Œï¼›åœ¨æœ‰å‚è£…é¥°å™¨åœºæ™¯ä¸‹ï¼Œç±»æ„é€ å™¨ä¼ å…¥è£…é¥°å™¨å‚æ•°ï¼Œ__call__ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼ å…¥ç›®æ ‡å‡½æ•°ï¼Œåç»­è°ƒç”¨æ‰æ˜¯ä»£ç†æ‰§è¡Œã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š import functools import logging class Log: def __init__( self, func=None, *, level=logging.INFO, name=__name__, fmt=\"function %s called with args=%s kwargs=%s and result=%s\", ): self.level = level self.name = name self.fmt = fmt self.logger = logging.getLogger(self.name) self.__update_wrapper(func) def __update_wrapper(self, func): self.func = func if func is None: return functools.update_wrapper(self, func) def __call__(self, *args, **kwargs): if self.func is None: self.__update_wrapper(args[0]) return self result = self.func(*args, **kwargs) self.logger.log(self.level, self.fmt, self.func.__name__, args, kwargs, result) return result \u003e\u003e\u003e @Log ... def greeting(name, say=\"Hello\"): ... return f\"{say} {name}!\" ... \u003e\u003e\u003e greeting(\"World\") INFO:__main__:function greeting called with args=('World',) kwargs={} and result=Hello World! 'Hello World!' \u003e\u003e\u003e @Log(level=logging.WARNING) ... def greeting(name, say=\"Hello\"): ... \"\"\"balabala\"\"\" ... return f\"{say} {name}!\" ... \u003e\u003e\u003e greeting(\"World\") WARNING:__main__:function greeting called with args=('World',) kwargs={} and result=Hello World! 'Hello World!' è¿™ç‰ˆå®ç°çœ‹èµ·æ¥å¾ˆç¹çï¼Œæ¡†æ¶æ€§çš„ä»£ç å æ¯”è¾ƒå¤§ï¼Œå¯ä»¥æŠ½å–ä¸€ä¸ªè£…é¥°å™¨åŸºç±»[11]ï¼Œå°è£…è£…é¥°å™¨æ„é€ çš„å…¬å…±ä»£ç ï¼Œè¿™æ ·åˆ›å»ºæ–°çš„è£…é¥°å™¨å°±ä¼šç®€æ´å¾ˆå¤šäº†ã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:4:2","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"å°å¿ƒçŠ¶æ€åŒ– åŸºäºç±»çš„è£…é¥°å™¨æœ‰ä¸ªâ€å‰¯ä½œç”¨â€œï¼Œå³æ¯æ¬¡è¯­æ³•ç³–è§£æè¿‡ç¨‹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªç±»å®ä¾‹ï¼Œè€Œç±»å®ä¾‹æ˜¯çŠ¶æ€åŒ–çš„ï¼Œè¿™æ„å‘³ç€åŒä¸€ç›®æ ‡å‡½æ•°çš„è£…é¥°å™¨å‚æ•°ä¼šåœ¨å¤šæ¬¡è°ƒç”¨ä¹‹é—´å…±äº«ï¼Œæ‰€ä»¥é™¤éä½ æ¸…æ¥šè‡ªå·±åœ¨åšä»€ä¹ˆï¼Œåƒä¸‡ä¸è¦åœ¨__call__ä¸­å¯¹è£…é¥°å™¨å‚æ•°è¿›è¡Œä¿®æ”¹ï¼Œæˆ‘å°±åœ¨ä¸€ä¸ªåŠ¨æ€SQLæ‰§è¡Œè£…é¥°å™¨ä¸­åƒè¿‡è¿™æ ·çš„æ•™è®­ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢è¿™æ®µæŠ•ç¡¬å¸æ¸¸æˆçš„ä»£ç ï¼Œä¸€æ—¦å‡ºç°ä¸€æ¬¡åé¢ï¼Œç»“æœå°±æ°¸è¿œæ˜¯åé¢äº†ï¼š import random class ConsoleDisplay: def __init__(self, func): self.func = func self.message = \"heads\" def __call__(self, *args, **kwargs): res = self.func(*args, **kwargs) if not res: self.message = \"tails\" self.print_message() def print_message(self): print(self.message) @ConsoleDisplay def flip_the_coin(): return random.choice([True, False]) \u003e\u003e\u003e flip_the_coin() heads \u003e\u003e\u003e flip_the_coin() tails \u003e\u003e\u003e flip_the_coin() tails ... # tails x 1000 (doge) ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:4:3","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"æ€»ç»“ Pythonè£…é¥°å™¨åˆçœ‹å¾ˆç®€å•ï¼Œä½†æ˜¯è¦æ„å»ºä¸€ä¸ªé€šç”¨ä¸”ç¨³å®šçš„è£…é¥°å™¨å´æ˜¯ä¸€é¡¹æ¯”è¾ƒæœ‰æŒ‘æˆ˜æ€§çš„å·¥ä½œã€‚ é¦–å…ˆè¦çŸ¥é“@è¯­æ³•ç³–çš„è§„åˆ™ï¼Œæ¸…æ¥šæ— å‚è£…é¥°å™¨ã€æœ‰å‚è£…é¥°å™¨ä»¥åŠç±»è£…é¥°å™¨ä¸‰ç§åœºæ™¯å„è‡ªçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œè¿™å¯ä»¥è¯´æ˜¯è£…é¥°å™¨ä¸–ç•Œçš„ä¸‰é¡¹åŸºæœ¬æ³•åˆ™ã€‚å…¶æ¬¡æ˜¯å…³äºå¤´ç­‰å‡½æ•°ï¼Œç†è§£å‡½æ•°ä½œä¸ºå®å‚ä¼ é€’ã€å†…éƒ¨å‡½æ•°ä»¥åŠå‡½æ•°ä½œä¸ºè¿”å›å€¼çš„ç”¨æ³•ï¼Œè¿™äº›æ˜¯è£…é¥°å™¨ä¸–ç•Œè¿è½¬çš„ä¸‰ä¸ªå‰ææ¡ä»¶ã€‚ ä¸‰é¡¹åŸºæœ¬æ³•åˆ™å’Œä¸‰ä¸ªå‰ææ¡ä»¶æ˜¯æˆ‘åœ¨Pythonè£…é¥°å™¨ä¸–ç•Œä¸­å‘ç°çš„ä¸å˜çš„éƒ¨åˆ†ï¼Œæˆ‘æŠŠå®ƒä»¬åˆ†äº«ç»™ä½ ã€‚ ä½¿ç”¨è£…é¥°å™¨å¯ä»¥å®ç°å¾ˆå¤šéå¸¸æå®¢çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å•ä¾‹æ¨¡å¼ã€ç¼“å­˜ã€æ•°æ®æ ¡éªŒã€æ³¨å†Œäº‹ä»¶ç›‘å¬è€…ã€å¼‚æ­¥è°ƒç”¨ç­‰ï¼Œæœ‰äº›åŠŸèƒ½ä¹Ÿè®¸ä½ å·²ç»ä½¿ç”¨è¿‡ï¼Œä¸‹æ¬¡å†é‡åˆ°ä¸å¦¨åœä¸‹æ¥çœ‹çœ‹æºç ï¼Œç›¸ä¿¡ä½ å·²ç»èƒ½å¤Ÿä¸€çœ¼å°±çœ‹æ‡‚å®ƒçš„å®ç°äº†ã€‚é™äºç¯‡å¹…ï¼Œå®æˆ˜éƒ¨åˆ†ä¸å†å±•å¼€ï¼Œå¯å‚è€ƒèµ„æ–™[8][12]ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå®ç”¨è£…é¥°å™¨ï¼Œé…·å£³[12]ä¸­ç”šè‡³å¼•ç”¨äº†ä¸€ä¸ªè£…é¥°å™¨åˆé›†[13]ï¼Œé‡Œé¢æœ‰40å¤šä¸ªå®ç”¨è£…é¥°å™¨ï¼Œç‰›å“‡ã€‚ æœ€åï¼Œå†å¥‰ä¸Šä¸€ä»½åå°ä»»åŠ¡è£…é¥°å™¨ä»£ç [14]ï¼Œä½œæŠ›ç –å¼•ç‰ä¹‹ç”¨ï¼Œä»¥ä¸Šã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:5:0","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"åè®° ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:6:0","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"è®¾è®¡æ€è€ƒ å‡½æ•°å¼ç¼–ç¨‹ ä½œä¸ºä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œè·Ÿé¢å‘è¿‡ç¨‹ç¼–ç¨‹ç›¸æ¯”ï¼Œå‡½æ•°å¼ç¼–ç¨‹é‡è§†ç»“æœå¤šäºè¿‡ç¨‹ã€‚è¿™ç§å€¾å‘ä¸€æ–¹é¢ä½“ç°ä¸ºä½¿ç”¨å£°æ˜å¼è€ŒéæŒ‡ä»¤å¼ï¼Œå³å‡½æ•°åº”è¯¥æè¿°åšäº†ä»€ä¹ˆè€Œä¸æ˜¯æ€ä¹ˆåšï¼›å¦ä¸€æ–¹é¢ä½“ç°ä¸ºä¸å¯å˜æ€§æˆ–è€…è¯´æ— çŠ¶æ€åŒ–ï¼Œå³ç›¸åŒçš„å‚æ•°è°ƒç”¨å‡½æ•°æ€»èƒ½å¾—åˆ°ä¸€è‡´çš„ç»“æœã€‚ å‡½æ•°å¼ç¼–ç¨‹å®é™…ä¸Šæ˜¯å°†å¤æ‚çš„å¤§é—®é¢˜åˆ†è§£æˆç›¸å¯¹ç®€å•çš„ç‹¬ç«‹å­é—®é¢˜ï¼Œç®€å•å­é—®é¢˜æ›´å®¹æ˜“æ±‚è§£å’Œä¿è¯æ­£ç¡®æ€§ã€‚ å…³æ³¨ç‚¹åˆ†ç¦» å°è£…çš„ç²¾é«“æ‰€åœ¨ï¼Œä½¿ç”¨è£…é¥°å™¨å¯ä»¥å°†ä¸€äº›é€šç”¨é€»è¾‘æŠ½ç¦»æˆç‹¬ç«‹çš„æ¨¡å—ï¼Œæ¯”å¦‚æ—¥å¿—ã€æƒé™ã€ç¼“å­˜ï¼Œä¸€æ–¹é¢å¯ä»¥å‡å°‘é‡å¤ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥è®©ä¸“ä¸šçš„â€œäººâ€åšä¸“ä¸šçš„äº‹æƒ…ï¼Œæ—¥å¿—è£…é¥°å™¨åªå…³æ³¨æ—¥å¿—ï¼Œå®ƒçš„ç›®çš„å°±æ˜¯æŠŠæ—¥å¿—æ‰“å‡ºèŠ±æ¥ :)ã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:6:1","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"ç¼–ç¨‹è€ƒå¤ 2002å¹´10æœˆ14æ—¥ï¼ŒPython 2.2.2 ç‰ˆæœ¬å‘å¸ƒï¼Œå¼•å…¥äº†staticmethodå’Œclassmethodï¼Œä½¿ç”¨æ–¹å¼çº¯é æ‰‹åŠ¨ï¼Œå¦‚foo = staticmethod(foo)ï¼ŒæœŸæœ›æœªæ¥ä¼šæœ‰ä¸€ä¸ªè¯­æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ç§å­åœ¨å½¼æ—¶å°±è¢«åŸ‹ä¸‹äº†ã€‚ 2002å¹´2æœˆè‡³2004å¹´7æœˆï¼Œä¸è£…é¥°å™¨è¯­æ³•ç›¸å…³çš„è®¨è®ºåœ¨ç¤¾åŒºæŒç»­è¿›è¡Œï¼Œæ— æ•°çš„ææ¡ˆè¢«æäº¤ï¼Œå¦‚å•è¯ç±»çš„asã€usingç­‰ï¼Œç¬¦å·ç±»çš„;...ã€\u003câ€¦\u003eã€|â€¦ã€[â€¦]ç­‰ï¼Œå…¶ä¸­[â€¦]æ˜¯@â€¦çš„å¼ºåŠ›ç«äº‰è€…ã€‚ 2003å¹´6æœˆ5æ—¥ï¼Œå®šä¹‰è£…é¥°å™¨è§„èŒƒçš„PEP 318[2]åˆ›å»ºï¼Œå½¼æ—¶çš„æ ‡é¢˜è¿˜æ˜¯pep 318, Decorators for Functions, Methods and Classesï¼ŒPEP 318ç»å¤šæ¬¡ä¿®æ”¹ï¼Œå†æ—¶è¿‘14ä¸ªæœˆï¼Œæœ€ç»ˆåªæ”¯æŒå‡½æ•°å’Œæ–¹æ³•è£…é¥°å™¨ã€‚ 2004å¹´6æœˆ7æ—¥è‡³9æ—¥ï¼Œæ¬§æ´²Pythonå¼€å‘è€…å¤§ä¼šå¬å¼€ï¼ŒPythonä¹‹çˆ¶Guidoæºå¸¦ç¤¾åŒºææ¡ˆåˆ°ä¼šä¸Šè¿›è¡Œè®¨è®ºï¼Œä½†ä»æœªæœ‰ç»“è®ºã€‚ 2004å¹´7æœˆ30å·ï¼Œâ€Pie-Thonâ€æŒ‘æˆ˜ï¼ˆ2003å¹´Parrotè™šæ‹Ÿæœºå¼€å‘è€…Dagå‘èµ·çš„æŒ‘æˆ˜ï¼Œæ¯”è¾ƒPythoné€šè¿‡Parrotè™šæ‹Ÿæœºå’ŒCPythonè¿è¡Œçš„æ€§èƒ½ï¼‰åœ¨OSCONä¸Šå…‘ç°ï¼Œä½œä¸ºèµ¢å®¶çš„Guidoå¯ä»¥å¾€Dagè„¸ä¸Šä¸¢ä¸€ä¸ªå¥¶æ²¹æ´¾ï¼Œç¤¾åŒºæ™®éè®¤ä¸ºè¿™ä¸ªäº‹ä»¶å¯¹Guidoæœ€ç»ˆå†³å®šä½¿ç”¨@å…·æœ‰é‡è¦ä½œç”¨ï¼Œå› è€Œå¾ˆå¤šäººç§°ä¹‹ä¸ºâ€œå‘½è¿ä¹‹æ´¾â€œã€‚ 2004å¹´8æœˆ2æ—¥ï¼ŒAnthonyåœ¨Guidoæˆæ„ä¸‹æäº¤äº†ä¸€ç‰ˆ@è£…é¥°å™¨å®ç°ï¼Œå› ä¸ºå½¢çŠ¶ç±»ä¼¼æ´¾ï¼ŒBarryç»™å®ƒå–äº†ä¸ªå¤–å·å«â€æ´¾-è£…é¥°å™¨â€œã€‚ ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:6:2","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"},{"categories":["python-lang"],"content":"å‚è€ƒèµ„æ–™ [1]. ç»´åŸºç™¾ç§‘ï¼šå¤´ç­‰å‡½æ•° [2]. PEP 318 â€“ Decorators for Functions and Methods [3]. Python documentation: User-defined functions [4]. Python documentation: functools.partial [5]. Python documentation: partial-objects [6]. Python Cookbook 3rd Edition: 9.6 å¸¦å¯é€‰å‚æ•°çš„è£…é¥°å™¨ [7]. PEP 3129 â€“ Class Decorators [8]. realpython: primer-on-python-decorators [9]. Python documentation: term-callable [10]. Python documentation: Emulating callable objects [11]. people-doc: Class-based decorators with Python [12]. é…·å£³ï¼šPYTHONä¿®é¥°å™¨çš„å‡½æ•°å¼ç¼–ç¨‹ [13]. PythonDecoratorLibrary [14]. gist: add background task with task register decorator ","date":"2023-11-14","objectID":"/posts/python-decorator-explained/:7:0","tags":["Python"],"title":"Python è£…é¥°å™¨è¯¦è§£","uri":"/posts/python-decorator-explained/"}]